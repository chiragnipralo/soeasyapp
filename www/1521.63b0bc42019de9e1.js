"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1521],{5789:(I,M,o)=>{o.d(M,{zB:()=>i});const i=(0,o(7423).fo)("Contacts",{web:()=>o.e(627).then(o.bind(o,627)).then(g=>new g.ContactsWeb)})},1521:(I,M,o)=>{o.d(M,{K:()=>T});var _=o(7582),i=o(5789),g=o(7423),E=o(6866),t=o(4893),c=o(8058),b=o(2561),p=o(6501),x=o(6524),f=o(2468),d=o(9808);function D(n,P){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getContacts())}),t.TgZ(2,"div"),t._UZ(3,"ion-icon",13),t.TgZ(4,"div")(5,"ion-label"),t._uU(6,"Tap to sync contacts"),t.qZA()()()(),t.BQk()}}function m(n,P){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",14)(2,"ion-text")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-checkbox",15),t.NdJ("ionChange",function(a){t.CHM(e);const l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.checkboxClick(a,l))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.phone_number),t.xp6(1),t.Q6J("checked",e.checked)}}function v(n,P){if(1&n&&(t.ynx(0),t.YNc(1,m,8,3,"ion-item",6),t.BQk()),2&n){const e=P.$implicit;t.xp6(1),t.Q6J("ngIf",e.checked)}}function C(n,P){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",14)(2,"ion-text")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-checkbox",15),t.NdJ("ionChange",function(a){t.CHM(e);const l=t.oxw().$implicit,r=t.oxw();return t.KtG(r.checkboxClick(a,l))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.phone_number),t.xp6(1),t.Q6J("checked",e.checked)}}function y(n,P){if(1&n&&(t.ynx(0),t.YNc(1,C,8,3,"ion-item",6),t.BQk()),2&n){const e=P.$implicit;t.xp6(1),t.Q6J("ngIf",!e.checked)}}let T=(()=>{class n{constructor(e,s,a,l,r,u,h,k){this.modalController=e,this.router=s,this.common=a,this.loadingController=l,this.chatconnect=r,this.navCtrl=u,this.dataservice=h,this.alertController=k,this.filterData=[],this.contacts=[],this.permissionGranted=!1,this.totalCheckedCount=0,this.contactss=[{checked:!1},{checked:!1}],this.totalCheckedCount=this.contactss.filter(O=>O.checked).length}doRefresh(e){this.getContacts(),setTimeout(()=>{e.target.complete()},2e3)}checkboxClick(e,s){s.checked=!s.checked,this.totalCheckedCount=s.checked?this.totalCheckedCount+1:this.totalCheckedCount-1,this.dataservice.totalContactCount=this.totalCheckedCount}presentAlert(){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Allow 'Contact Access' to access your contacts while you are using the app",buttons:[{text:"Don't Allow",cssClass:"alert-button"},{text:"Allow",cssClass:"alert-button",handler:()=>{this.getPermissions()}}]})).present()})}getPermissions(){return(0,_.mG)(this,void 0,void 0,function*(){if(g.dV.isNativePlatform())return{granted:"granted"===(yield i.zB.requestPermissions()).contacts}})}ngOnInit(){const e=localStorage.getItem("cust_contacts");if(null!==e){var s=JSON.parse(e);this.dataservice.ValidateArray(s)&&(this.filterData=s,this.dataservice.all_contacts=s,this.permissionGranted=!0)}}closeModal(){return(0,_.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss({dismissed:!0})})}GoNext(){this.SubmitEvent()}SubmitEvent(){let e;e=this.dataservice.all_contacts.filter(r=>r.checked).length>0?7:0;const s=this.dataservice.getUserData();this.common.show("Please wait, we are sending invites to your selected contact list...");var a=new FormData;null!==s&&a.append("user_token",s),a.append("eventFlag",this.dataservice.eventFlag),a.append("payment_status",e.toString()),a.append("communityId",this.dataservice.communityId),a.append("location",this.dataservice.locationn),a.append("emergency_contact",this.dataservice.emergency_contact),a.append("event_cusine_type",JSON.stringify(this.dataservice.event_cusine_type)),a.append("event_food_type",JSON.stringify(this.dataservice.event_food_type)),a.append("original_event_images",this.dataservice.orginalImage);const l=localStorage.getItem("event_images");null!==l&&!this.dataservice.isNullOrUndefined(l)&&a.append("event_images",this.dataservice.convertBase64ToBlob(l)),this.dataservice.foodImages.forEach(r=>{a.append("menu_imgData[]",r)}),a.append("events_data",JSON.stringify(this.dataservice.events_form)),a.append("guest_contacts",JSON.stringify(this.dataservice.all_contacts.filter(r=>r.checked))),this.chatconnect.postFormData(a,"create_event").then(r=>{this.common.hide(),1==r.Response.status?(localStorage.removeItem("event_images"),localStorage.removeItem("menu_imgData"),this.closeModal(),this.dataservice.all_contacts.filter(u=>u.checked).length>0?(this.dataservice.user_event_data.id=r.Response.event_id,this.router.navigate(["/event-payment",{invite_type:"invite",type:"free_event"}]),this.dataservice.tokenUrl=r.Response.token_url):(this.dataservice.tokenUrl=r.Response.token_url,this.OpenSuccess(this.dataservice.tokenUrl))):this.common.presentToast("Oops",r.Response.message)},r=>{this.common.hide(),console.log("Connection failed Messge")})}OpenSuccess(e){return(0,_.mG)(this,void 0,void 0,function*(){this.dataservice.shareable_event_url=e;const s=yield this.modalController.create({component:E.I,cssClass:"pindialog-container",handle:!0});return s.onDidDismiss().then(a=>{null!=a.data&&this.dataservice.shareable_event_url&&(this.closeModal(),this.navCtrl.navigateRoot("/tabs/dashboard"))}),yield s.present()})}filterItems(e){this.dataservice.isNullOrUndefined(e.detail.value)||(this.filterData=this.dataservice.all_contacts.filter(s=>s.name.toLowerCase().indexOf(e.detail.value.toLowerCase())>-1||s.phone_number.toLowerCase().indexOf(e.detail.value.toLowerCase())>-1))}getContacts(){return(0,_.mG)(this,void 0,void 0,function*(){yield i.zB.requestPermissions().then(e=>(0,_.mG)(this,void 0,void 0,function*(){"granted"==e.contacts&&(this.permissionGranted=!0,this.loadingController.create({spinner:"lines",message:"Retrieving your contacts. This may take some time. Please wait...",cssClass:"custom-loading",backdropDismiss:!1}).then(s=>(0,_.mG)(this,void 0,void 0,function*(){s.present();var a=JSON.parse(localStorage.getItem("cust_contacts")||"null");if(this.dataservice.ValidateArray(a)){const l={name:!0,phones:!0};yield i.zB.getContacts({projection:l}).then(r=>(0,_.mG)(this,void 0,void 0,function*(){yield r.contacts.forEach((h,k)=>{if(h.name&&h.name.display&&h.phones)for(let O=0;O<h.phones.length;O++)h.phones[O].number.length>9&&this.contacts.push({name:h.name.display,phone_number:h.phones[O].number.replace(/\D/g,"").slice(-10)});this.contacts.sort((O,A)=>this.compareObjects(O,A,"name"))});const u=[];this.contacts.forEach(h=>{u.some(k=>k.phone_number===h.phone_number)||u.push(h)}),localStorage.setItem("cust_contacts",JSON.stringify(u)),this.dataservice.all_contacts=u,this.filterData=u,s.dismiss()}))}else this.dataservice.all_contacts=a,this.filterData=a,s.dismiss()})))}))})}compareObjects(e,s,a){var l,r;let u=null===(l=e[a])||void 0===l?void 0:l.toUpperCase(),h=null===(r=s[a])||void 0===r?void 0:r.toUpperCase();return u<h?-1:u>h?1:0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.IN),t.Y36(b.F0),t.Y36(p.v),t.Y36(c.HT),t.Y36(x.O),t.Y36(c.SH),t.Y36(f.D),t.Y36(c.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-contact"]],decls:19,vars:3,consts:[["slot","start"],[3,"click"],["slot","end","name","close"],[1,"ion-no-padding",3,"ionChange"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down","pullingText","Pull to refresh","refreshingSpinner","circles"],[4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[1,"ion-no-border"],[1,"action-button"],["color","secondary","shape","round",1,"right",3,"click"],[1,"ion-padding-start","ion-padding-end","share-container",3,"click"],["name","share-outline"],[1,"ion-text-wrap"],["slot","end",3,"checked","ionChange"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return s.closeModal()}),t._UZ(4,"ion-icon",2),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Contacts"),t.qZA()(),t.TgZ(7,"ion-searchbar",3),t.NdJ("ionChange",function(l){return s.filterItems(l)}),t.qZA()(),t.TgZ(8,"ion-content")(9,"ion-refresher",4),t.NdJ("ionRefresh",function(l){return s.doRefresh(l)}),t._UZ(10,"ion-refresher-content",5),t.qZA(),t.YNc(11,D,7,0,"ng-container",6),t.TgZ(12,"div",7),t.YNc(13,v,2,1,"ng-container",8),t.YNc(14,y,2,1,"ng-container",8),t.qZA()(),t.TgZ(15,"ion-footer",9)(16,"div",10)(17,"ion-button",11),t.NdJ("click",function(){return s.GoNext()}),t._uU(18,"Invite"),t.qZA()()()),2&e&&(t.xp6(11),t.Q6J("ngIf",!s.permissionGranted),t.xp6(2),t.Q6J("ngForOf",s.filterData),t.xp6(1),t.Q6J("ngForOf",s.filterData))},dependencies:[d.sg,d.O5,c.YG,c.Sm,c.nz,c.W2,c.fr,c.Gu,c.gu,c.Ie,c.Q$,c.nJ,c.Wo,c.VI,c.yW,c.wd,c.sr,c.w,c.j9],styles:[".toolbar-container[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center}ion-title[_ngcontent-%COMP%]{text-align:center;position:absolute;inset:0}ion-header[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin:5px auto;width:95%}.share-container[_ngcontent-%COMP%]{display:flex;justify-content:center;height:100%;align-items:center}.share-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:81px;width:100%}.list-container[_ngcontent-%COMP%]{border:2px solid black;height:50vh;margin:10px}.action-button-container[_ngcontent-%COMP%]{text-align:center}.action-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:var(--ion-color-light);width:50%;height:40px;font-size:1em;margin-top:1em}.right[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:181px;margin:10px auto;font-size:16px}ion-footer[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;box-shadow:2px 2px 2px 2px gray}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding:18px 0}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px;background:#e9e9e9;border-radius:100%;margin:auto;padding:10px}"]}),n})()},6866:(I,M,o)=>{o.d(M,{I:()=>b});var _=o(7582),i=o(4893),g=o(8058),E=o(2468),t=o(9808);function c(p,x){1&p&&(i.ynx(0),i.TgZ(1,"P"),i._uU(2,"Your public event has been sent for approval. You will be notified once it's approved."),i.qZA(),i.BQk())}let b=(()=>{class p{constructor(f,d){this.modalController=f,this.dataservice=d}ngOnInit(){}closeModal(){return(0,_.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss({dismissed:!0})})}}return p.\u0275fac=function(f){return new(f||p)(i.Y36(g.IN),i.Y36(E.D))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-success"]],decls:13,vars:1,consts:[["slot","start"],[3,"click"],["slot","end","name","close"],[1,"ion-padding"],[1,"contianer"],["src","assets/images/congratulation.png"],[1,"text"],[1,"head-text"],[4,"ngIf"],[1,"foot"],["expand","block","color","secondary","shape","round",3,"click"]],template:function(f,d){1&f&&(i.TgZ(0,"ion-buttons",0)(1,"ion-button",1),i.NdJ("click",function(){return d.closeModal()}),i._UZ(2,"ion-icon",2),i.qZA()(),i.TgZ(3,"ion-content",3)(4,"div",4),i._UZ(5,"ion-img",5),i.TgZ(6,"div",6)(7,"p",7),i._uU(8,"Event creation complete!"),i.qZA(),i.YNc(9,c,3,0,"ng-container",8),i.qZA(),i.TgZ(10,"div",9)(11,"ion-button",10),i.NdJ("click",function(){return d.closeModal()}),i._uU(12,"Close"),i.qZA()()()()),2&f&&(i.xp6(9),i.Q6J("ngIf",0==d.dataservice.public_event))},dependencies:[t.O5,g.YG,g.Sm,g.W2,g.gu,g.Xz],styles:["ion-icon[_ngcontent-%COMP%]{font-size:1.4rem}.contianer[_ngcontent-%COMP%]{position:relative;top:10%}.contianer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:40vh;border-radius:20px;margin:auto}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{text-align:center}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .head-text[_ngcontent-%COMP%]{font-size:1.2rem;word-spacing:2px;font-weight:600}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:bolder}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;font-weight:500}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]{margin-top:40px;text-align:center}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{background:var(--ion-color-dark);padding:7px;margin-left:10px;border-radius:50%}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{max-width:250px;margin:40px auto auto;height:40px}"]}),p})()},6524:(I,M,o)=>{o.d(M,{O:()=>f});var _=o(7582),i=o(520);const E=(0,o(7423).fo)("Network",{web:()=>o.e(4203).then(o.bind(o,4203)).then(d=>new d.NetworkWeb)});var t=o(4893),c=o(2468),b=o(6501);let p="https://api.soeasyapp.com/",f=(()=>{class d{constructor(m,v,C){this.http=m,this.dataservice=v,this.common=C,this.checkInternetConnection()}initiatePayment(m,v){const C={headers:(new i.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((y,T)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+v,JSON.stringify(m),C).subscribe(n=>{y(n)},n=>{T(n),"HttpErrorResponse"==n.name&&("Unknown Error"==n.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==n.statusText?"Something Went Wrong...":n.statusText)),console.log("In Chatconnect provider : Error",n)})})}postData(m,v){const C={headers:(new i.WM).set("Content-Type","application/json")};return new Promise((y,T)=>{this.http.post(p+v,JSON.stringify(m),C).subscribe(n=>{y(n)},n=>{T(n),"HttpErrorResponse"==n.name&&("Unknown Error"==n.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==n.statusText?"Something Went Wrong...":n.statusText)),console.log("In Chatconnect provider : Error",n)})})}checkInternetConnection(){return(0,_.mG)(this,void 0,void 0,function*(){(yield E.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(m,v){return new Promise((C,y)=>{const T=(new i.WM).set("Accept","application/json");this.http.post(p+v,m,{headers:T}).subscribe(n=>{C(n)},n=>{y(n)})})}}return d.\u0275fac=function(m){return new(m||d)(t.LFG(i.eN),t.LFG(c.D),t.LFG(b.v))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);