"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[218],{5789:(A,T,o)=>{o.d(T,{zB:()=>C});const C=(0,o(7423).fo)("Contacts",{web:()=>o.e(627).then(o.bind(o,627)).then(s=>new s.ContactsWeb)})},218:(A,T,o)=>{o.r(T),o.d(T,{ReinvitePageModule:()=>S});var P=o(9808),C=o(2382),s=o(8058),_=o(2561),g=o(7582),O=o(5789),M=o(7423),t=o(4893),R=o(6501),Z=o(6524),p=o(2468);function w(n,h){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",11),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.getContacts())}),t.TgZ(2,"div"),t._UZ(3,"ion-icon",12),t.TgZ(4,"div",13)(5,"ion-label"),t._uU(6,"Sync your phone contacts with SoEasy by clicking on icon above"),t.qZA()()()(),t.BQk()}}function d(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",14)(2,"ion-text")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-checkbox",15),t.NdJ("ionChange",function(c){t.CHM(e);const r=t.oxw().$implicit,u=t.oxw();return t.KtG(u.checkboxClick(c,r))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.phone_number),t.xp6(1),t.Q6J("checked",e.checked)}}function f(n,h){if(1&n&&(t.ynx(0),t.YNc(1,d,8,3,"ion-item",5),t.BQk()),2&n){const e=h.$implicit;t.xp6(1),t.Q6J("ngIf",e.checked)}}function v(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label",14)(2,"ion-text")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-checkbox",15),t.NdJ("ionChange",function(c){t.CHM(e);const r=t.oxw().$implicit,u=t.oxw();return t.KtG(u.checkboxClick(c,r))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(e.phone_number),t.xp6(1),t.Q6J("checked",e.checked)}}function y(n,h){if(1&n&&(t.ynx(0),t.YNc(1,v,8,3,"ion-item",5),t.BQk()),2&n){const e=h.$implicit;t.xp6(1),t.Q6J("ngIf",!e.checked)}}const a=[{path:"",component:(()=>{class n{constructor(e,i,c,r,u,m,l,k){this.router=e,this.common=i,this.loadingController=c,this.chatconnect=r,this.navCtrl=u,this._route=m,this.dataservice=l,this.alertController=k,this.filterData=[],this.contacts=[],this.permissionGranted=!1,this.totalCheckedCount=0,this.contactss=[{checked:!1},{checked:!1}],this.totalCheckedCount=this.contactss.filter(x=>x.checked).length}doRefresh(e){this.getContacts(),setTimeout(()=>{e.target.complete()},2e3)}checkboxClick(e,i){i.checked=!i.checked,this.totalCheckedCount=i.checked?this.totalCheckedCount+1:this.totalCheckedCount-1,this.dataservice.totalContactCount=this.totalCheckedCount}filterItems(e){this.dataservice.isNullOrUndefined(e.detail.value)||(this.filterData=this.dataservice.all_contacts.filter(i=>i.name.toLowerCase().includes(e.detail.value.toLowerCase())||i.phone_number.toLowerCase().includes(e.detail.value.toLowerCase())))}presentAlert(){return(0,g.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Allow 'Contact Access' to access your contacts while you are using the app",buttons:[{text:"Don't Allow",cssClass:"alert-button"},{text:"Allow",cssClass:"alert-button",handler:()=>{console.log("Confirm Cancel: blah"),this.getPermissions()}}]})).present()})}getPermissions(){return(0,g.mG)(this,void 0,void 0,function*(){if(M.dV.isNativePlatform())return{granted:"granted"===(yield O.zB.requestPermissions()).contacts}})}ngOnInit(){const e=localStorage.getItem("cust_contacts");if(null!==e){var i=JSON.parse(e);this.dataservice.ValidateArray(i)&&(this.filterData=i,this.dataservice.all_contacts=i,this.permissionGranted=!0)}}getContacts(){return(0,g.mG)(this,void 0,void 0,function*(){yield O.zB.requestPermissions().then(e=>(0,g.mG)(this,void 0,void 0,function*(){"granted"==e.contacts&&(this.permissionGranted=!0,this.loadingController.create({spinner:"lines",message:"Retrieving your contacts. This may take some time. Please wait...",cssClass:"custom-loading"}).then(i=>(0,g.mG)(this,void 0,void 0,function*(){i.present();var c=JSON.parse(localStorage.getItem("cust_contacts")||"null");if(this.dataservice.ValidateArray(c)){const r={name:!0,phones:!0};yield O.zB.getContacts({projection:r}).then(u=>(0,g.mG)(this,void 0,void 0,function*(){yield u.contacts.forEach((l,k)=>{if(l.name&&l.name.display&&l.phones)for(let x=0;x<l.phones.length;x++)l.phones[x].number.length>9&&this.contacts.push({name:l.name.display,phone_number:l.phones[x].number.replace(/\D/g,"").slice(-10)});this.contacts.sort((x,I)=>this.compareObjects(x,I,"name"))});const m=[];this.contacts.forEach(l=>{m.some(k=>k.phone_number===l.phone_number)||m.push(l)}),localStorage.setItem("cust_contacts",JSON.stringify(m)),this.dataservice.all_contacts=m,this.filterData=m,i.dismiss()}))}else this.dataservice.all_contacts=c,this.filterData=c,i.dismiss()})))}))})}GoNext(){this.dataservice.all_contacts.filter(e=>e.checked).length>0?this.router.navigate(["/event-payment",{type:this._route.snapshot.params.type}]):this.common.presentToast("","Please Select Contact.")}compareObjects(e,i,c){var r,u;let m=null===(r=e[c])||void 0===r?void 0:r.toUpperCase(),l=null===(u=i[c])||void 0===u?void 0:u.toUpperCase();return m<l?-1:m>l?1:0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.F0),t.Y36(R.v),t.Y36(s.HT),t.Y36(Z.O),t.Y36(s.SH),t.Y36(_.gz),t.Y36(p.D),t.Y36(s.Br))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reinvite"]],decls:18,vars:3,consts:[["slot","start"],["text","","icon","arrow-back-outline"],[1,"ion-no-padding",3,"ionChange"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down","pullingText","Pull to refresh","refreshingSpinner","circles"],[4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[1,"ion-no-border"],[1,"action-button"],["color","secondary","shape","round",1,"right",3,"click"],[1,"ion-padding-start","ion-padding-end","share-container",3,"click"],["name","share-outline",2,"width","100%"],[2,"text-align","center"],[1,"ion-text-wrap"],["slot","end",3,"checked","ionChange"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Contacts"),t.qZA()(),t.TgZ(6,"ion-searchbar",2),t.NdJ("ionChange",function(r){return i.filterItems(r)}),t.qZA()(),t.TgZ(7,"ion-content")(8,"ion-refresher",3),t.NdJ("ionRefresh",function(r){return i.doRefresh(r)}),t._UZ(9,"ion-refresher-content",4),t.qZA(),t.YNc(10,w,7,0,"ng-container",5),t.TgZ(11,"div",6),t.YNc(12,f,2,1,"ng-container",7),t.YNc(13,y,2,1,"ng-container",7),t.qZA()(),t.TgZ(14,"ion-footer",8)(15,"div",9)(16,"ion-button",10),t.NdJ("click",function(){return i.GoNext()}),t._uU(17,"Next"),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("ngIf",!i.permissionGranted),t.xp6(2),t.Q6J("ngForOf",i.filterData),t.xp6(1),t.Q6J("ngForOf",i.filterData))},dependencies:[P.sg,P.O5,s.oU,s.YG,s.Sm,s.nz,s.W2,s.fr,s.Gu,s.gu,s.Ie,s.Q$,s.nJ,s.Wo,s.VI,s.yW,s.wd,s.sr,s.w,s.j9,s.cs],styles:["ion-title[_ngcontent-%COMP%]{text-align:center;position:absolute;inset:0}ion-header[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin:5px auto;width:95%}.share-container[_ngcontent-%COMP%]{display:flex;justify-content:center;height:100%;align-items:center}.share-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:81px}.list-container[_ngcontent-%COMP%]{border:2px solid black;height:50vh;margin:10px}.action-button-container[_ngcontent-%COMP%]{text-align:center}.action-button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:var(--ion-color-light);width:50%;height:40px;font-size:1em;margin-top:1em}.right[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:181px;margin:10px auto;font-size:16px}ion-footer[_ngcontent-%COMP%]{border-radius:25px 25px 0 0;box-shadow:2px 2px 2px 2px gray}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding:18px 0}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid}ion-footer[_ngcontent-%COMP%]   .csv_style[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:35px;background:#e9e9e9;border-radius:100%;margin:auto;padding:20px}"]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.Bz.forChild(a),_.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[P.ez,C.u5,s.Pc,N]}),n})()},6524:(A,T,o)=>{o.d(T,{O:()=>Z});var P=o(7582),C=o(520);const _=(0,o(7423).fo)("Network",{web:()=>o.e(4203).then(o.bind(o,4203)).then(p=>new p.NetworkWeb)});var g=o(4893),O=o(2468),M=o(6501);let t="https://api.soeasyapp.com/",Z=(()=>{class p{constructor(d,f,v){this.http=d,this.dataservice=f,this.common=v,this.checkInternetConnection()}initiatePayment(d,f){const v={headers:(new C.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((y,b)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+f,JSON.stringify(d),v).subscribe(a=>{y(a)},a=>{b(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}postData(d,f){const v={headers:(new C.WM).set("Content-Type","application/json")};return new Promise((y,b)=>{this.http.post(t+f,JSON.stringify(d),v).subscribe(a=>{y(a)},a=>{b(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}checkInternetConnection(){return(0,P.mG)(this,void 0,void 0,function*(){(yield _.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(d,f){return new Promise((v,y)=>{const b=(new C.WM).set("Accept","application/json");this.http.post(t+f,d,{headers:b}).subscribe(a=>{v(a)},a=>{y(a)})})}}return p.\u0275fac=function(d){return new(d||p)(g.LFG(C.eN),g.LFG(O.D),g.LFG(M.v))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);