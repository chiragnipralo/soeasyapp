"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[441],{441:(F,I,a)=>{a.r(I),a.d(I,{CreateCommunityPageModule:()=>k});var t=a(9808),_=a(2382),s=a(8058),f=a(2561),C=a(7582),Z=a(1091),P=a(5866),e=a(4893),M=a(2313),A=a(6501),d=a(2468),y=a(6524);function r(o,u){if(1&o){const n=e.EpF();e._UZ(0,"img",21),e.TgZ(1,"ion-icon",22),e.NdJ("click",function(){e.CHM(n);const c=e.MAs(3);return e.KtG(c.click())}),e.qZA(),e.TgZ(2,"input",23,24),e.NdJ("change",function(c){e.CHM(n);const g=e.oxw();return e.KtG(g.loadImageFromDevice(c,"event"))}),e.qZA()}2&o&&e.Q6J("src",u.$implicit,e.LSH)}function m(o,u){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"ion-row",25)(2,"ion-input",26),e.NdJ("change",function(c){e.CHM(n);const g=e.oxw();return e.KtG(g.loadImageFromDevice(c,"event"))}),e.qZA(),e.TgZ(3,"h5",27),e._uU(4,"Upload Community Image "),e.TgZ(5,"span",11),e._uU(6,"*"),e.qZA()()(),e.BQk()}}function l(o,u){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.message," ")}}function b(o,u){if(1&o&&(e.ynx(0),e.YNc(1,l,2,1,"div",28),e.BQk()),2&o){const n=u.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.ionicForm.get("title").hasError(n.type)&&(i.ionicForm.get("title").dirty||i.ionicForm.get("title").touched))}}function x(o,u){if(1&o&&(e.ynx(0),e.TgZ(1,"ion-select-option",30),e._uU(2),e.qZA(),e.BQk()),2&o){const n=u.$implicit;e.xp6(1),e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.name)}}function p(o,u){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.message," ")}}function E(o,u){if(1&o&&(e.ynx(0),e.YNc(1,p,2,1,"div",28),e.BQk()),2&o){const n=u.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.ionicForm.get("category").hasError(n.type)&&(i.ionicForm.get("category").dirty||i.ionicForm.get("category").touched))}}function S(o,u){if(1&o&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.message," ")}}function N(o,u){if(1&o&&(e.ynx(0),e.YNc(1,S,2,1,"div",28),e.BQk()),2&o){const n=u.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.ionicForm.get("community_type").hasError(n.type)&&(i.ionicForm.get("community_type").dirty||i.ionicForm.get("community_type").touched))}}const Y=[{path:"",component:(()=>{class o{constructor(n,i,c,g,v,h,T,U,O,w,B,D,R){this.formBuilder=i,this.common=c,this.dataservice=g,this.navCtrl=v,this.chatconnect=h,this.modalController=T,this.createv4omdal=U,this.successmodal=O,this.contactpagemodal=w,this.router=B,this.route=D,this.alertController=R,this.isSubmitted=!1,this.file_uploaddata="",this.showMoreBar=!1,this.Blobimage=[],this.showSubmitButton=!1,this.customAlertOptions={header:"Select Category",translucent:!0},this.EventOptions={header:"Select Type",translucent:!0},this.error_messages={title:[{type:"required",message:"Title is required."}],description:[{type:"required",message:"Description is required."}],category:[{type:"required",message:"Category is required."}],community_type:[{type:"required",message:"Community Type is required."}]},this.sanitizer=n,this.imageUrls=[],this.route.queryParams.subscribe(G=>{this.accountType=+G.value,console.log(this.accountType)})}ngOnInit(){return(0,C.mG)(this,void 0,void 0,function*(){this.ionicForm=this.formBuilder.group({title:["",[_.kI.required]],description:[""],category:["",[_.kI.required]],community_type:["",[_.kI.required]]}),yield this.GetDashboard()})}GetDashboard(){return new Promise((n,i)=>{let c={user_token:this.dataservice.getUserData()};this.chatconnect.postData(c,"user_dashboard").then(g=>{console.log(g),1==g.Response.status?(this.dataservice.events_categories=g.Response.all_categories,this.sortedCategories=this.dataservice.events_categories.sort((v,h)=>v.name.localeCompare(h.name)),n(!0)):this.common.presentToast("Oops",g.Response.message)},g=>{console.log("Connection failed Messge"),i(g)})})}submit(){var n,i,c,g,v;return(0,C.mG)(this,void 0,void 0,function*(){if(this.isSubmitted=!0,this.ionicForm.markAllAsTouched(),console.log(this.ionicForm),this.ionicForm.valid){this.common.show("Please wait");const T=this.dataservice.getUserData();var h=new FormData;null!==T&&h.append("user_token",T);const U=localStorage.getItem("event_images");null!==U&&!this.dataservice.isNullOrUndefined(U)&&h.append("community_images",this.dataservice.convertBase64ToBlob(U)),h.append("title",null===(n=this.ionicForm.get("title"))||void 0===n?void 0:n.value),h.append("description",null===(i=this.ionicForm.get("description"))||void 0===i?void 0:i.value),h.append("category",null===(c=this.ionicForm.get("category"))||void 0===c?void 0:c.value),h.append("community_type",null===(g=this.ionicForm.get("community_type"))||void 0===g?void 0:g.value),h.append("account_type",(null===(v=this.accountType)||void 0===v?void 0:v.toString())||""),console.log(h),this.chatconnect.postFormData(h,"create_community").then(O=>{this.common.hide(),1==O.Response.status?(localStorage.removeItem("event_images"),this.OpenSuccess(O.Response.token_url)):this.common.presentToast("Oops",O.Response.message)},O=>{this.common.hide(),console.log("Connection failed Messge")})}else(yield this.alertController.create({header:"",subHeader:"Please enter required fields",buttons:["Dismiss"]})).present()})}view(n,i){return(0,C.mG)(this,void 0,void 0,function*(){const c=yield this.modalController.create({component:Z.b,cssClass:"my-menubar"});return c.onDidDismiss().then(g=>{null!=g.data?g.data.cropped_image&&(this.dataservice.convertBase64ToBlob(g.data.cropped_image),"event"==i&&(this.imageUrls=[],this.imageUrls.unshift(g.data.cropped_image),localStorage.setItem("event_images",g.data.cropped_image))):this.imageUrls=[]}),yield c.present()})}loadImageFromDevice(n,i){console.log(n);const c=n.target.files[0];console.log(c),this.file_uploaddata=c,console.log(c),(new FormData).append("photo",c,c.name),this.Blobimage.push(c),this.dataservice.blobToBase64(c).then(h=>{this.dataservice.event_base64img=h,this.view(h,i)});const v=new FileReader;v.readAsArrayBuffer(c),v.onload=()=>{let h=new Blob([new Uint8Array(v.result)]),T=URL.createObjectURL(h);"event"==i&&this.imageUrls.unshift(this.sanitizer.bypassSecurityTrustUrl(T))},console.log(this.Blobimage),v.onerror=h=>{}}OpenSuccess(n){return(0,C.mG)(this,void 0,void 0,function*(){this.dataservice.shareable_event_url=n;const i=yield this.modalController.create({component:P.G,cssClass:"pindialog-container",handle:!0});return i.onDidDismiss().then(c=>{console.log("DATA HERE ---\x3e",c),null!=c.data&&this.dataservice.shareable_event_url&&(this.closeModal(),this.navCtrl.navigateRoot("/tabs/dashboard"))}),yield i.present()})}closeModal(){return(0,C.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss({dismissed:!0})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(M.H7),e.Y36(_.qu),e.Y36(A.v),e.Y36(d.D),e.Y36(s.SH),e.Y36(y.O),e.Y36(s.IN),e.Y36(s.IN),e.Y36(s.IN),e.Y36(s.IN),e.Y36(f.F0),e.Y36(f.gz),e.Y36(s.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-community"]],decls:48,vars:9,consts:[["slot","start"],["text","","icon","arrow-back-outline"],["slot","end","name","close","routerLink","/tabs/dashboard"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[2,"margin-top","10px"],[1,"container"],[1,"images"],["ngFor","",3,"ngForOf"],[4,"ngIf"],[1,"form-input"],[1,"asct"],["formControlName","title","placeholder","Enter Community Title"],[4,"ngFor","ngForOf"],["formControlName","description","placeholder","Write Description About Community","autoGrow","true"],["formControlName","category","interface","alert","placeholder","Select Category",3,"interfaceOptions"],["formControlName","community_type","interface","alert","placeholder","Select Community Type",3,"interfaceOptions"],["value","0"],["value","1"],[1,"btn"],["expand","block","type","submit","shape","round","color","secondary"],[1,"image",2,"border-radius","10px","width","100%",3,"src"],["name","add-circle","slot","end",2,"font-size","45px","color","seagreen","position","absolute","right","0",3,"click"],["type","file","id","file-input","accept","image/png, image/jpg, image/jpeg",2,"display","none",3,"change"],["fileInput",""],[1,"main_img"],["type","file","id","file-input","accept","image/png, image/jpeg",1,"custom-file-input",3,"change"],["align","center"],["class","error-message",4,"ngIf"],[1,"error-message"],[3,"value"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Create Community"),e.qZA(),e._UZ(6,"ion-icon",2),e.qZA()(),e.TgZ(7,"ion-content",3)(8,"form",4),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(9,"ion-list")(10,"div",5)(11,"div",6)(12,"p",7),e.YNc(13,r,4,1,"ng-template",8),e.qZA(),e.YNc(14,m,7,0,"ng-container",9),e.TgZ(15,"div",10)(16,"h4"),e._uU(17,"Title "),e.TgZ(18,"span",11),e._uU(19,"*"),e.qZA()(),e._UZ(20,"ion-input",12),e.qZA(),e.YNc(21,b,2,1,"ng-container",13),e.TgZ(22,"div",10)(23,"h4"),e._uU(24,"Description"),e.qZA(),e._UZ(25,"ion-textarea",14),e.qZA(),e.TgZ(26,"div",10)(27,"h4"),e._uU(28,"Category "),e.TgZ(29,"span",11),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"ion-select",15),e.YNc(32,x,3,2,"ng-container",13),e.qZA()(),e.YNc(33,E,2,1,"ng-container",13),e.TgZ(34,"div",10)(35,"h4"),e._uU(36,"Community Type "),e.TgZ(37,"span",11),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"ion-select",16)(40,"ion-select-option",17),e._uU(41,"Public"),e.qZA(),e.TgZ(42,"ion-select-option",18),e._uU(43,"Private"),e.qZA()()(),e.YNc(44,N,2,1,"ng-container",13),e.qZA()(),e.TgZ(45,"div",19)(46,"ion-button",20),e._uU(47,"Submit"),e.qZA()()()()()),2&n&&(e.xp6(8),e.Q6J("formGroup",i.ionicForm),e.xp6(5),e.Q6J("ngForOf",i.imageUrls),e.xp6(1),e.Q6J("ngIf",!i.imageUrls.length),e.xp6(7),e.Q6J("ngForOf",i.error_messages.title),e.xp6(10),e.Q6J("interfaceOptions",i.customAlertOptions),e.xp6(1),e.Q6J("ngForOf",i.dataservice.events_categories),e.xp6(1),e.Q6J("ngForOf",i.error_messages.category),e.xp6(6),e.Q6J("interfaceOptions",i.EventOptions),e.xp6(5),e.Q6J("ngForOf",i.error_messages.community_type))},dependencies:[t.sg,t.O5,_._Y,_.JJ,_.JL,_.sg,_.u,s.oU,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.q_,s.Nd,s.t9,s.n0,s.g2,s.wd,s.sr,s.QI,s.j9,s.cs,s.YI,f.rH],styles:[".error-message[_ngcontent-%COMP%]{color:red;text-align:left;padding-bottom:10px}ion-toolbar[_ngcontent-%COMP%]{--border-style: none}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.3rem;padding:10px}.asct[_ngcontent-%COMP%]{font-size:15px;color:red}.custom-file-input[_ngcontent-%COMP%]{text-indent:-9999px;z-index:1;height:99%;max-width:99%;margin:auto;border:none;background:url(/assets/images/download.png);background-size:35px 35px;background-repeat:no-repeat;background-position:center}.container[_ngcontent-%COMP%]{margin:0 auto 50px;max-width:800px}.main_img[_ngcontent-%COMP%]{height:233px;border-radius:10px;margin-bottom:10px;background:rgb(241,241,241);border:1px solid #285500}.main_img[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{position:absolute;font-size:14px;left:0;z-index:1;right:0;top:43px;color:#000}.form-input[_ngcontent-%COMP%]{margin-bottom:5px}h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700}ion-label[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder!important}ion-input[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;height:40px;padding:5px!important;background:rgb(241,241,241);border:1px solid #285500}ion-textarea[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;padding:5px!important;background:rgb(241,241,241);border:1px solid #285500}ion-select[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;padding-left:14px!important;height:40px;background:rgb(241,241,241);border:1px solid #285500}.btn[_ngcontent-%COMP%]{position:fixed;left:0;right:0;bottom:10px}.btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:auto;max-width:200px}"]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(Y),f.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[t.ez,_.u5,_.UX,s.Pc,J]}),o})()},1091:(F,I,a)=>{a.d(I,{b:()=>A});var t=a(4893),_=a(6501),s=a(2468),f=a(8058),C=a(9808),Z=a(3877);const P=["cropper"];function e(d,y){if(1&d){const r=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.close())}),t._UZ(1,"ion-icon",8),t.qZA()}}function M(d,y){if(1&d){const r=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.cropImage())}),t._UZ(1,"ion-icon",9),t.qZA()}}let A=(()=>{class d{constructor(r,m,l){this.commonservice=r,this.dataservice=m,this.modalController=l,this.myImage=null,this.imageChangedEvent="",this.croppedImage="",this.scale=1,this.transform={}}ngOnInit(){}imageLoaded(){}imageCropped(r){this.croppedImage=r.base64}loadImageFailed(){console.log("Image load failed!")}fileChangeEvent(r){this.imageChangedEvent=r}cropImage(){this.cropper&&this.cropper.crop()&&this.cropper.crop().base64&&(this.croppedImage=this.cropper.crop().base64),this.myImage=null,this.modalController.dismiss({dismissed:!0,cropped_image:this.croppedImage})}close(){this.myImage=null,this.croppedImage=null,this.modalController.dismiss()}discardChanges(){this.myImage=null,this.croppedImage=null}rotate(){var r;const m=((null!==(r=this.transform.rotate)&&void 0!==r?r:0)+90)%360;this.transform=Object.assign(Object.assign({},this.transform),{rotate:m})}zoomOut(){this.scale=Math.max(.1,this.scale-.1),this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}zoomIn(){this.scale=Math.min(3,this.scale+.1),this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}}return d.\u0275fac=function(r){return new(r||d)(t.Y36(_.v),t.Y36(s.D),t.Y36(f.IN))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-imgcropper"]],viewQuery:function(r,m){if(1&r&&t.Gf(P,5),2&r){let l;t.iGM(l=t.CRH())&&(m.cropper=l.first)}},decls:16,vars:10,consts:[["slot","start"],["color","success",3,"click",4,"ngIf"],["slot","end"],["format","jpeg",3,"imageBase64","imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMaxWidth","cropperMaxHeight","transform","autoCrop","imageCropped","loadImageFailed","imageLoaded"],["cropper",""],[2,"display","flex","justify-content","space-around"],[3,"click"],["color","success",3,"click"],["color","danger","slot","icon-only","name","close"],["color","success","slot","icon-only","name","checkmark"]],template:function(r,m){1&r&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Crop "),t.qZA(),t.TgZ(4,"ion-buttons",0),t.YNc(5,e,2,0,"ion-button",1),t.qZA(),t.TgZ(6,"ion-buttons",2),t.YNc(7,M,2,0,"ion-button",1),t.qZA()()(),t.TgZ(8,"ion-content")(9,"image-cropper",3,4),t.NdJ("imageCropped",function(b){return m.imageCropped(b)})("loadImageFailed",function(){return m.loadImageFailed()})("imageLoaded",function(){return m.imageLoaded()}),t.qZA(),t.TgZ(11,"div",5)(12,"ion-button",6),t.NdJ("click",function(){return m.zoomOut()}),t._uU(13,"Zoom -"),t.qZA(),t.TgZ(14,"ion-button",6),t.NdJ("click",function(){return m.zoomIn()}),t._uU(15,"Zoom +"),t.qZA()()()),2&r&&(t.xp6(5),t.Q6J("ngIf",m.dataservice.event_base64img),t.xp6(2),t.Q6J("ngIf",m.dataservice.event_base64img),t.xp6(2),t.Q6J("imageBase64",m.dataservice.event_base64img)("imageChangedEvent",m.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",16/9)("cropperMaxWidth",3e3)("cropperMaxHeight",3e3)("transform",m.transform)("autoCrop",!1))},dependencies:[C.O5,Z.ap,f.YG,f.Sm,f.W2,f.Gu,f.gu,f.wd,f.sr]}),d})()},6524:(F,I,a)=>{a.d(I,{O:()=>A});var t=a(7582),_=a(520);const f=(0,a(7423).fo)("Network",{web:()=>a.e(4203).then(a.bind(a,4203)).then(d=>new d.NetworkWeb)});var C=a(4893),Z=a(2468),P=a(6501);let e="https://api.soeasyapp.com/",A=(()=>{class d{constructor(r,m,l){this.http=r,this.dataservice=m,this.common=l,this.checkInternetConnection()}initiatePayment(r,m){const l={headers:(new _.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((b,x)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+m,JSON.stringify(r),l).subscribe(p=>{b(p)},p=>{x(p),"HttpErrorResponse"==p.name&&("Unknown Error"==p.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==p.statusText?"Something Went Wrong...":p.statusText)),console.log("In Chatconnect provider : Error",p)})})}postData(r,m){const l={headers:(new _.WM).set("Content-Type","application/json")};return new Promise((b,x)=>{this.http.post(e+m,JSON.stringify(r),l).subscribe(p=>{b(p)},p=>{x(p),"HttpErrorResponse"==p.name&&("Unknown Error"==p.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==p.statusText?"Something Went Wrong...":p.statusText)),console.log("In Chatconnect provider : Error",p)})})}checkInternetConnection(){return(0,t.mG)(this,void 0,void 0,function*(){(yield f.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(r,m){return new Promise((l,b)=>{const x=(new _.WM).set("Accept","application/json");this.http.post(e+m,r,{headers:x}).subscribe(p=>{l(p)},p=>{b(p)})})}}return d.\u0275fac=function(r){return new(r||d)(C.LFG(_.eN),C.LFG(Z.D),C.LFG(P.v))},d.\u0275prov=C.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);