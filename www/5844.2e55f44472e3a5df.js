"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5844],{5844:(b,P,i)=>{i.r(P),i.d(P,{ChatDetailPageModule:()=>D});var f=i(9808),d=i(2382),s=i(8058),C=i(2561),v=i(7582),O=i(2943),t=i(4893),M=i(6501),x=i(2468),y=i(6524);let l=(()=>{class n{constructor(e){this.config=e}get isIOS(){return"ios"===this.config.get("mode")}get isAndroid(){return"android"===this.config.get("mode")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(s.De))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w=["chat_input"];function g(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"ion-infinite-scroll",16),t.NdJ("ionInfinite",function(c){t.CHM(e);const u=t.oxw();return t.KtG(u.getMoreMessagesI(c))}),t._UZ(1,"ion-infinite-scroll-content",17),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("position",e.top)}}function p(n,r){if(1&n&&t._UZ(0,"ion-img",31),2&n){const e=t.oxw(2).$implicit;t.Q6J("src",e.profile_img)}}function _(n,r){if(1&n&&(t.TgZ(0,"div",32),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.user_initials)," ")}}function h(n,r){1&n&&t._UZ(0,"ion-spinner",33)}function m(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",20)(2,"ion-avatar"),t.YNc(3,p,1,1,"ion-img",21),t.YNc(4,_,3,3,"div",22),t.qZA()(),t.YNc(5,h,1,0,"ion-spinner",23),t.TgZ(6,"div",24)(7,"div",25)(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",26)(11,"p",27),t._uU(12),t.qZA(),t._UZ(13,"span",28),t.TgZ(14,"p",29),t._uU(15),t.TgZ(16,"span",30),t._uU(17),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngIf",e.profile_img),t.xp6(1),t.Q6J("ngIf",!e.profile_img),t.xp6(1),t.Q6J("ngIf","pending"===e.status),t.xp6(4),t.hij(" ",e.userName," "),t.xp6(3),t.Oqu(e.message_by),t.xp6(3),t.hij("",e.message," "),t.xp6(2),t.hij(" \xa0\xa0\xa0\xa0",e.event_date,"")}}function a(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"div",34)(2,"div",35)(3,"div",36)(4,"div",37)(5,"span",38),t._uU(6),t.qZA()()()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(6),t.Oqu(e.message)}}function T(n,r){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,m,18,7,"ng-container",19),t.YNc(2,a,7,1,"ng-container",19),t.qZA()),2&n){const e=r.$implicit,o=t.oxw();t.ekj("left",e.user_id!=o.current_user_id)("right",e.user_id===o.current_user_id),t.xp6(1),t.Q6J("ngIf",1!=e.message_type),t.xp6(1),t.Q6J("ngIf",1==e.message_type)}}const I=[{path:"",component:(()=>{class n{constructor(e,o,c,u,k){this.commonservice=e,this.dataservice=o,this.chatconnect=c,this.modalController=u,this.platformService=k,this.canInfinite=!1,this.chat_events=[],this.imageBg="chat-bg",this.chat_events_messages=[],this.editorMsg="",this.showEmojiPicker=!1}ngOnInit(){}listChats(){console.log(this.dataservice.user_event_chat_data),console.log(this.dataservice.user_event_chat_data);let e={user_id:this.dataservice.user_event_chat_data.user_id,user_token:this.dataservice.getUserData(),event_id:this.dataservice.user_event_chat_data.event_id,chat_type:this.dataservice.user_event_chat_data.chat_type,is_premium:this.dataservice.user_event_chat_data.is_premium};console.log("This is API Data ==>",e),this.chatconnect.postData(e,"get_event_chats_by_userid_and_eventid").then(o=>{console.log("result",o),this.chat_events_messages=o.Response.event_chats,this.current_user_id=o.Response.current_user_id,this.current_chat_type=o.Response.current_chat_type,console.log("chatdata",this.chat_events_messages),console.log("This is chat type ==> ",this.current_chat_type)},o=>{console.log("Connection failed Messge")})}ionViewDidEnter(){this.listChats()}onFocus(){this.showEmojiPicker=!1,this.scrollToBottom()}sendMsg(){this.editorMsg.trim()&&(console.log("IM HERE "),this.chatconnect.postData({user_id:this.dataservice.user_event_chat_data.user_id,event_id:this.dataservice.user_event_chat_data.event_id,chat_message:this.editorMsg,chat_type:this.dataservice.user_event_chat_data.chat_type,is_premium:this.dataservice.user_event_chat_data.is_premium},"add_events_chats").then(o=>{console.log(o),this.chat_events_messages.push({user_id:this.current_user_id,event_id:this.dataservice.user_event_chat_data.event_id,message:this.editorMsg,user_initials:this.dataservice.getInitials(this.dataservice.user_profile_data.user_name),chat_type:this.dataservice.user_event_chat_data.chat_type,is_premium:this.dataservice.user_event_chat_data.is_premium}),console.log(this.chat_events_messages),this.editorMsg="",this.scrollToBottom(),this.listChats()},o=>{console.log("Connection failed Messge")}))}scrollToBottom(){setTimeout(()=>{this.content.scrollToBottom&&this.content.scrollToBottom()},400)}focus(){this.messageInput&&this.messageInput.nativeElement&&this.messageInput.nativeElement.focus()}getMoreMessagesI(e){}logScrolling(e){this.canInfinite=e.detail.currentY>10}openModal(e){return(0,v.mG)(this,void 0,void 0,function*(){return console.log("This Is Image:",e),yield(yield this.modalController.create({component:O.B,componentProps:{originalEventImages:e}})).present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.v),t.Y36(x.D),t.Y36(y.O),t.Y36(s.IN),t.Y36(l))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat-detail"]],viewQuery:function(e,o){if(1&e&&(t.Gf(s.W2,5),t.Gf(w,5)),2&e){let c;t.iGM(c=t.CRH())&&(o.content=c.first),t.iGM(c=t.CRH())&&(o.messageInput=c.first)}},decls:24,vars:8,consts:[["slot","start"],["name","arrow-back-outline","routerLink","/tabs/chat"],["size","1.7"],[2,"height","auto","width","auto"],["class-","event-img",2,"width","40px","height","40px",3,"src","click"],[1,"title-top"],[3,"scrollEvents","ionScroll"],[3,"position","ionInfinite",4,"ngIf"],[1,"message-wrap"],["class","message",3,"left","right",4,"ngFor","ngForOf"],[1,"ion-no-border"],[1,"input-wrap"],["placeholder","Type message here",3,"ngModel","ngModelChange","keyup.enter","focusin"],["chat_input",""],["fill","clear","slot","icon-only","item-right","",3,"click"],["slot","icon-only","name","send"],[3,"position","ionInfinite"],["loadingSpinner","bubbles"],[1,"message"],[4,"ngIf"],[1,"user-img"],["class","userimg",3,"src",4,"ngIf"],["class","userinitials",4,"ngIf"],["name","dots",4,"ngIf"],[1,"msg-detail"],[1,"msg-info"],[1,"msg-content"],[1,"message_by"],[1,"triangle"],[1,""],["slot","end",1,"chat-date"],[1,"userimg",3,"src"],[1,"userinitials"],["name","dots"],[1,"_2OvAm","focusable-list-item","_1jHIY"],["data-testid","msg-notification-container",1,"UzMP7","n6BPp"],[1,"_1BOF7"],["data-testid","subtype-modify",1,"_1sykI"],[1,"_11JPr"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-icon",1),t.qZA(),t.TgZ(4,"ion-grid")(5,"ion-row")(6,"ion-col",2)(7,"ion-avatar",3)(8,"ion-img",4),t.NdJ("click",function(){return o.openModal(o.dataservice.user_event_chat_data.original_event_images||o.dataservice.user_event_chat_data.event_images)}),t.qZA()()(),t.TgZ(9,"ion-col",5)(10,"ion-title"),t._uU(11),t.ALo(12,"titlecase"),t.qZA()()()()()(),t.TgZ(13,"ion-content",6),t.NdJ("ionScroll",function(u){return o.logScrolling(u)}),t.YNc(14,g,2,1,"ion-infinite-scroll",7),t.TgZ(15,"div",8),t.YNc(16,T,3,6,"div",9),t.qZA()(),t.TgZ(17,"ion-footer",10)(18,"div",11)(19,"textarea",12,13),t.NdJ("ngModelChange",function(u){return o.editorMsg=u})("keyup.enter",function(){return o.sendMsg()})("focusin",function(){return o.onFocus()}),t._uU(21,"  "),t.qZA(),t.TgZ(22,"ion-button",14),t.NdJ("click",function(){return o.sendMsg()}),t._UZ(23,"ion-icon",15),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("src",o.dataservice.user_event_chat_data.event_images),t.xp6(3),t.Oqu(t.lcZ(12,6,o.dataservice.user_event_chat_data.event_name)),t.xp6(2),t.Q6J("scrollEvents",!0),t.xp6(1),t.Q6J("ngIf",o.canInfinite),t.xp6(2),t.Q6J("ngForOf",o.chat_events_messages),t.xp6(3),t.Q6J("ngModel",o.editorMsg))},dependencies:[f.sg,f.O5,d.Fj,d.JJ,d.On,s.BJ,s.YG,s.Sm,s.wI,s.W2,s.fr,s.jY,s.Gu,s.gu,s.Xz,s.ju,s.MB,s.Nd,s.PQ,s.wd,s.sr,s.YI,C.rH,f.rS],styles:["._1jHIY[_ngcontent-%COMP%]{display:flex;flex-direction:column;-webkit-user-select:text;user-select:text}._1jHIY[_ngcontent-%COMP%]   .n6BPp[_ngcontent-%COMP%]{padding:5px;text-align:center;border-radius:7.5px;text-shadow:0 1px 0 rgba(var(--inverse-rgb),.4);color:#fff;background-color:#838383;box-sizing:border-box;display:inline-block;flex:none;max-width:100%!important;font-size:12.5px;line-height:21px}._2OvAm[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding-right:9%;padding-left:9%}ion-content[_ngcontent-%COMP%]{--background: url(/assets/images/chat-bg.jpg);background-size:100% 100%;--padding-top: 10px;--padding-bottom: 10px}ion-content[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{background-color:#f5f5f5}ion-footer[_ngcontent-%COMP%]{box-shadow:0 0 4px #0000001c;background-color:#fff}.line-breaker[_ngcontent-%COMP%]{white-space:pre-line}.input-wrap[_ngcontent-%COMP%]{padding:5px;display:flex}.input-wrap[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:0;border-bottom:1px var(--ion-color-primary);border-style:solid}.chat-date[_ngcontent-%COMP%]{font-size:10px;color:#7f7f7f;float:right;margin-top:10px}.message-wrap[_ngcontent-%COMP%]{padding:0 10px}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{position:relative;padding:7px 0}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:50%;width:45px;height:45px}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{width:100%;display:inline-block}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:#888}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{position:relative;border-radius:5px;padding:8px;border:1px solid #ddd;color:#000;width:auto;max-width:80%}.message-wrap[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#fff;border-radius:2px;height:8px;width:8px;top:12px;display:block;border-style:solid;border-color:#ddd;border-width:1px;transform:rotate(45deg);position:absolute}.message-wrap[_ngcontent-%COMP%]   .message_by[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:900;position:relative;top:-4px;font-size:10px!important;color:green}.message-wrap[_ngcontent-%COMP%]   .message.left[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#fff;float:left}.message-wrap[_ngcontent-%COMP%]   .message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{padding-left:60px}.message-wrap[_ngcontent-%COMP%]   .message.left[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{left:0}.message-wrap[_ngcontent-%COMP%]   .message.left[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{color:#343434}.message-wrap[_ngcontent-%COMP%]   .message.left[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{border-top-width:0;border-right-width:0;left:-5px}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{padding-right:60px}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:right}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{right:0}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{position:absolute;right:10px;top:50px}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#dcf8c6;float:right}.message-wrap[_ngcontent-%COMP%]   .message.right[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#fff;border-bottom-width:0;border-left-width:0;right:-5px}.userinitials[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;background-color:#0a0;color:#fff;display:flex;justify-content:center;align-items:center;font-size:30px;font-weight:700}.userimg[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover}.title-top[_ngcontent-%COMP%]{width:100%;padding-left:0;padding-right:0;display:block}.title-top[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding:0;text-align:left;font-size:13px}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(I),C.Bz]}),n})(),D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez,d.u5,s.Pc,Z]}),n})()},6524:(b,P,i)=>{i.d(P,{O:()=>y});var f=i(7582),d=i(520);const C=(0,i(7423).fo)("Network",{web:()=>i.e(4203).then(i.bind(i,4203)).then(l=>new l.NetworkWeb)});var v=i(4893),O=i(2468),t=i(6501);let M="https://api.soeasyapp.com/",y=(()=>{class l{constructor(g,p,_){this.http=g,this.dataservice=p,this.common=_,this.checkInternetConnection()}initiatePayment(g,p){const _={headers:(new d.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((h,m)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+p,JSON.stringify(g),_).subscribe(a=>{h(a)},a=>{m(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}postData(g,p){const _={headers:(new d.WM).set("Content-Type","application/json")};return new Promise((h,m)=>{this.http.post(M+p,JSON.stringify(g),_).subscribe(a=>{h(a)},a=>{m(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}checkInternetConnection(){return(0,f.mG)(this,void 0,void 0,function*(){(yield C.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(g,p){return new Promise((_,h)=>{const m=(new d.WM).set("Accept","application/json");this.http.post(M+p,g,{headers:m}).subscribe(a=>{_(a)},a=>{h(a)})})}}return l.\u0275fac=function(g){return new(g||l)(v.LFG(d.eN),v.LFG(O.D),v.LFG(t.v))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);