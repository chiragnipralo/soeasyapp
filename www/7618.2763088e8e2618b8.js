"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7618],{7618:(w,x,i)=>{i.r(x),i.d(x,{ChoosePlanPageModule:()=>A});var y=i(9808),u=i(2382),c=i(8058),f=i(2561),P=i(1505),t=i(4893),O=i(6501),b=i(2468),M=i(6524);function T(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"label",7)(2,"input",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit,v=t.oxw(4);return t.KtG(v.handleEventSelection(l))}),t.qZA(),t.TgZ(3,"span",9)(4,"span",10),t._uU(5),t.qZA(),t.TgZ(6,"span",11),t._uU(7),t.TgZ(8,"span",12),t._uU(9),t.qZA()(),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.TgZ(12,"span",13),t._uU(13),t.qZA()()(),t.BQk()}if(2&n){const e=s.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("checked",o.selectedDetailId===e.id),t.xp6(3),t.Oqu(e.type),t.xp6(2),t.hij("\u20b9",e.amount," "),t.xp6(2),t.Oqu(e.validity),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.invite_count)}}function p(n,s){if(1&n&&(t.ynx(0),t.YNc(1,T,14,6,"ng-container",6),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.plan_details)}}function k(n,s){if(1&n&&(t.ynx(0),t.YNc(1,p,2,1,"ng-container",6),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.paidEventData)}}function r(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"label",7)(2,"input",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit,v=t.oxw(4);return t.KtG(v.handleEventSelection(l))}),t.qZA(),t.TgZ(3,"span",9)(4,"span",10),t._uU(5),t.qZA(),t.TgZ(6,"span",11),t._uU(7),t.TgZ(8,"span",12),t._uU(9),t.qZA()(),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.TgZ(12,"span",13),t._uU(13),t.qZA()()(),t.BQk()}if(2&n){const e=s.$implicit,o=t.oxw(4);t.xp6(2),t.Q6J("checked",o.selectedDetailId===e.id),t.xp6(3),t.Oqu(e.type),t.xp6(2),t.hij("\u20b9",e.amount," "),t.xp6(2),t.Oqu(e.validity),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.invite_count)}}function h(n,s){if(1&n&&(t.ynx(0),t.YNc(1,r,14,6,"ng-container",6),t.BQk()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("ngForOf",e.plan_details)}}function g(n,s){if(1&n&&(t.ynx(0),t.YNc(1,h,2,1,"ng-container",6),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.paidCommunityData)}}function m(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",5),t.YNc(2,k,2,1,"ng-container",3),t.YNc(3,g,2,1,"ng-container",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",(null==e.paidEventData?null:e.paidEventData.length)&&1==e.selectedType),t.xp6(1),t.Q6J("ngIf",(null==e.paidCommunityData?null:e.paidCommunityData.length)&&2==e.selectedType)}}const a=[{path:"",component:(()=>{class n{constructor(e,o,d,l,v,Z,S,N,Y,U){this.formBuilder=e,this.alertController=o,this.commonservice=d,this.common=l,this.dataservice=v,this._route=Z,this.chatconnect=S,this.router=N,this.navCtrl=Y,this.loadingController=U,this.plandata=[],this.paidEventData=[],this.paidCommunityData=[],this.selectedDetailId=null,this.razor_key="rzp_live_G3jYxHdfoo5gQR",this.currency="INR";let E={user_token:this.dataservice.getUserData()};this.chatconnect.postData(E,"user_profile").then(_=>{console.log(_),1==_.Response.status?_.Response.user_data&&(this.dataservice.user_profile_data=_.Response.user_data[0],this.user_data=_.Response.user_data[0]):this.commonservice.presentToast("Oops",_.Response.message)},_=>{console.log("Connection failed Messge")})}ngOnInit(){this.selectedType=this._route.snapshot.params.select_type,console.log("Selected type ==>",this._route.snapshot.params.select_type),console.log("This Account Id ==> ",this.dataservice.GetAccountuser()),this.GetAccountDetails(),this.GetPaymentPlan()}handleEventSelection(e){this.detailsPlan=e,this.selectedAmount=this.detailsPlan.amount,console.log("Stringified plan_info:",JSON.stringify(this.detailsPlan))}GetAccountDetails(){let e={user_token:this.dataservice.getUserData(),account_id:this.dataservice.GetAccountuser()};this.chatconnect.postData(e,"account_details").then(o=>{console.log("This Is Account Details==>",o),1==o.Response.status?this.accountData=o.Response.Details:this.commonservice.presentToast("Oops",o.Response.message)},o=>{console.log("Connection failed Messge")})}GetPaymentPlan(){let e={user_token:this.dataservice.getUserData()};this.chatconnect.postData(e,"payment_plan").then(o=>{console.log("This is Plan Data==>",o),1==o.Response.status?(this.plandata=o.Response.payment_plan,this.separatePaymentPlans()):this.commonservice.presentToast("Oops",o.Response.message)},o=>{console.log("Connection failed Messge")})}separatePaymentPlans(){console.log("IF Here"),this.paidEventData=[],this.paidCommunityData=[];for(let e of this.plandata)"paid event"==e.payment_for?this.paidEventData.push(e):"paid community"==e.payment_for&&this.paidCommunityData.push(e)}payNow(){if(this.selectedAmount>0){var e={contact_person:this.user_data.user_name,contact_number:this.user_data.mobile,user_token:this.dataservice.getUserData(),rp_payment_id:"",retry_payment:0,method:"Online",amount:this.selectedAmount,products:this.dataservice.GetAccountuser(),plan_info:JSON.stringify(this.detailsPlan),type:"business_account",reason:1===this.accountData.type?"events":"community",duration:"",start_date:"",end_date:""};const o={currency:this.currency,key:this.razor_key,amount:(100*this.selectedAmount).toString(),name:"SoEasy",description:"Genesis",image:"https://soeasyapp.com/dashboard/img/soeasy.png",prefill:{email:this.user_data.email,contact:this.user_data.mobile},theme:{color:"#3399cc"}};try{P.h.open(o).then(d=>{e.rp_payment_id=d.response.razorpay_payment_id,this.chatconnect.postData(e,"checkout").then(l=>{console.log(l),1==l.Response.status?1==this.accountData.type?this.router.navigate(["/buztabs/map"]):2==this.accountData.type&&this.router.navigate(["/buztabs/dashboard"]):this.commonservice.presentToast("Oops",l.Response.message)},l=>{console.log("Connection failed Messge")})})}catch(d){if("string"==typeof d){let l=JSON.parse(d);this.commonservice.show(l.description)}else console.error("Unhandled error:",d)}}else this.commonservice.presentToast("","Please Select Plan.")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.qu),t.Y36(c.Br),t.Y36(O.v),t.Y36(O.v),t.Y36(b.D),t.Y36(f.gz),t.Y36(M.O),t.Y36(f.F0),t.Y36(c.SH),t.Y36(c.HT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-choose-plan"]],decls:10,vars:2,consts:[["slot","start"],["text","","icon","arrow-back-outline"],[1,"ion-padding"],[4,"ngIf"],["expand","block","shape","round","color","secondary",3,"click"],[1,"grid"],[4,"ngFor","ngForOf"],[1,"pay-card"],["name","plan","type","radio",1,"radio",3,"checked","click"],[1,"plan-details"],[1,"plan-type"],[1,"plan-cost"],[1,"val"],[2,"padding","0.5rem 0"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5," Payment Plan "),t.qZA()()(),t.TgZ(6,"ion-content",2),t.YNc(7,m,4,2,"div",3),t.TgZ(8,"ion-button",4),t.NdJ("click",function(){return o.payNow()}),t._uU(9),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",1),t.xp6(2),t.hij("Pay Now ",o.selectedAmount,""))},dependencies:[y.sg,y.O5,c.oU,c.YG,c.Sm,c.W2,c.Gu,c.wd,c.sr,c.cs],styles:['ion-buttons[_ngcontent-%COMP%]{width:0}.title[_ngcontent-%COMP%]{padding:0 20px}ion-button[_ngcontent-%COMP%]{max-width:200px;margin:20px auto}ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{--background:linear-gradient(to bottom, #ffffff, #e2fbcc)}ion-card[_ngcontent-%COMP%]{background:rgba(247,224,252,.71);box-shadow:2px 3px 5px 1px #c7c8db;height:100px;margin:18px 10px}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{height:100%}ion-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;display:flex;height:100%}ion-card[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{height:33px;width:33px;--border-radius: 50%}.grid[_ngcontent-%COMP%]{display:grid;margin:0 auto;max-width:60em;padding:0}@media (min-width: 42em){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.pay-card[_ngcontent-%COMP%]{border-radius:.5em;position:relative}.radio[_ngcontent-%COMP%]{font-size:inherit;margin:0;position:relative;left:calc(20em + 3px);top:calc(2.8em + 0px)}@supports (-webkit-appearance: none) or (-moz-appearance: none){.radio[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background:#fff;border:2px solid #e2ebf6;border-radius:50%;cursor:pointer;height:1.5em;outline:none;transition:background .2s ease-out,border-color .2s ease-out;width:1.5em;visibility:hidden}.radio[_ngcontent-%COMP%]:after{border:2px solid #fff;border-top:0;border-left:0;content:"";display:block;height:.75rem;left:25%;position:absolute;top:45%;transform:rotate(45deg) translate(-50%,-50%);width:.375rem}.radio[_ngcontent-%COMP%]:checked{background:#558309;border-color:#558309}.pay-card[_ngcontent-%COMP%]:hover   .radio[_ngcontent-%COMP%]{border-color:#e2ebf6}.pay-card[_ngcontent-%COMP%]:hover   .radio[_ngcontent-%COMP%]:checked{border-color:#558309}}.plan-details[_ngcontent-%COMP%]{border:2px solid #e2ebf6;border-radius:.5em;cursor:pointer;display:flex;flex-direction:column;padding:1em;transition:border-color .2s ease-out;background:#fff}.plan-details[_ngcontent-%COMP%]:hover{box-shadow:5px 5px 10px #00000026}.pay-card[_ngcontent-%COMP%]:hover   .plan-details[_ngcontent-%COMP%]{border-color:#e2ebf6}.radio[_ngcontent-%COMP%]:checked ~ .plan-details[_ngcontent-%COMP%]{border-color:#558309}.radio[_ngcontent-%COMP%]:focus ~ .plan-details[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #e2ebf6}.radio[_ngcontent-%COMP%]:disabled ~ .plan-details[_ngcontent-%COMP%]{color:#e2ebf6;cursor:default}.radio[_ngcontent-%COMP%]:disabled ~ .plan-details[_ngcontent-%COMP%]   .plan-type[_ngcontent-%COMP%]{color:#e2ebf6}.pay-card[_ngcontent-%COMP%]:hover   .radio[_ngcontent-%COMP%]:disabled ~ .plan-details[_ngcontent-%COMP%]{border-color:#e2ebf6;box-shadow:none}.pay-card[_ngcontent-%COMP%]:hover   .radio[_ngcontent-%COMP%]:disabled{border-color:#e2ebf6}.plan-type[_ngcontent-%COMP%]{color:#558309;font-size:1.5rem;font-weight:700;line-height:1em}.plan-cost[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;padding:.5rem 0}.slash[_ngcontent-%COMP%]{font-weight:400}.plan-cycle[_ngcontent-%COMP%]{font-size:2rem;font-variant:none;border-bottom:none;cursor:inherit;text-decoration:none}.hidden-visually[_ngcontent-%COMP%]{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.val[_ngcontent-%COMP%]{font-size:15px}']}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(a),f.Bz]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[u.qu],imports:[y.ez,u.u5,c.Pc,D]}),n})()},6524:(w,x,i)=>{i.d(x,{O:()=>T});var y=i(7582),u=i(520);const f=(0,i(7423).fo)("Network",{web:()=>i.e(4203).then(i.bind(i,4203)).then(p=>new p.NetworkWeb)});var P=i(4893),t=i(2468),O=i(6501);let b="https://api.soeasyapp.com/",T=(()=>{class p{constructor(r,h,g){this.http=r,this.dataservice=h,this.common=g,this.checkInternetConnection()}initiatePayment(r,h){const g={headers:(new u.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((m,C)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+h,JSON.stringify(r),g).subscribe(a=>{m(a)},a=>{C(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}postData(r,h){const g={headers:(new u.WM).set("Content-Type","application/json")};return new Promise((m,C)=>{this.http.post(b+h,JSON.stringify(r),g).subscribe(a=>{m(a)},a=>{C(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}checkInternetConnection(){return(0,y.mG)(this,void 0,void 0,function*(){(yield f.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(r,h){return new Promise((g,m)=>{const C=(new u.WM).set("Accept","application/json");this.http.post(b+h,r,{headers:C}).subscribe(a=>{g(a)},a=>{m(a)})})}}return p.\u0275fac=function(r){return new(r||p)(P.LFG(u.eN),P.LFG(t.D),P.LFG(O.v))},p.\u0275prov=P.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);