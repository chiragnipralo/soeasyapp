"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8383],{6524:(y,b,n)=>{n.d(b,{O:()=>C});var P=n(7582),c=n(520);const O=(0,n(7423).fo)("Network",{web:()=>n.e(4203).then(n.bind(n,4203)).then(u=>new u.NetworkWeb)});var g=n(4893),e=n(2468),R=n(6501);let _="https://api.soeasyapp.com/",C=(()=>{class u{constructor(p,l,h){this.http=p,this.dataservice=l,this.common=h,this.checkInternetConnection()}initiatePayment(p,l){const h={headers:(new c.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((d,v)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+l,JSON.stringify(p),h).subscribe(t=>{d(t)},t=>{v(t),"HttpErrorResponse"==t.name&&("Unknown Error"==t.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==t.statusText?"Something Went Wrong...":t.statusText)),console.log("In Chatconnect provider : Error",t)})})}postData(p,l){const h={headers:(new c.WM).set("Content-Type","application/json")};return new Promise((d,v)=>{this.http.post(_+l,JSON.stringify(p),h).subscribe(t=>{d(t)},t=>{v(t),"HttpErrorResponse"==t.name&&("Unknown Error"==t.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==t.statusText?"Something Went Wrong...":t.statusText)),console.log("In Chatconnect provider : Error",t)})})}checkInternetConnection(){return(0,P.mG)(this,void 0,void 0,function*(){(yield O.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(p,l){return new Promise((h,d)=>{const v=(new c.WM).set("Accept","application/json");this.http.post(_+l,p,{headers:v}).subscribe(t=>{h(t)},t=>{d(t)})})}}return u.\u0275fac=function(p){return new(p||u)(g.LFG(c.eN),g.LFG(e.D),g.LFG(R.v))},u.\u0275prov=g.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8383:(y,b,n)=>{n.r(b),n.d(b,{ResOtpPageModule:()=>v});var P=n(9808),c=n(2382),i=n(8058),O=n(2561),g=n(7582),e=n(4893),R=n(6501),_=n(2468),T=n(6524),C=n(7053),u=n(133);function M(t,m){if(1&t){const s=e.EpF();e.ynx(0),e.TgZ(1,"ion-button",12),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.signResend())}),e._uU(2,"Resend OTP ?"),e.qZA(),e.BQk()}}function p(t,m){if(1&t){const s=e.EpF();e.ynx(0),e.TgZ(1,"ion-button",12),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.Resend())}),e._uU(2,"Resend OTP ?"),e.qZA(),e.BQk()}}const h=[{path:"",component:(()=>{class t{constructor(s,r,a,o,f,x,N,Z,S){this.commonservice=s,this._router=r,this.nav=a,this.dataservice=o,this.chatconnect=f,this.authservice=x,this.alertController=N,this.route=Z,this.smsRetriever=S,this.requestType="user_login",this.otp=""}ngOnInit(){console.log("Dataservice ==>",this.dataservice.set_user_signup),this.route.queryParams.subscribe(s=>{this.requestType=s.requestType||"user_login"}),this.requestOTP()}requestOTP(){this.smsRetriever.startWatching().then(s=>{const r=s.Message.toString().substr(33,4);this.otp=r}).catch(s=>{console.error("Error starting SMS Retriever:",s)})}otpInputChange(){console.log(this.otp)}signup_password(){""===this.otp||this.otp.length<4?this.commonservice.presentToast("Oops","Please Enter Otp"):(console.log(this.dataservice),this.dataservice.getOtp()===this.otp?"user_signup"===this.dataservice.is_user_login_or_signup?this.RegisterUser():"user_login"==this.dataservice.is_user_login_or_signup&&(this.authservice.isAuthenticated.next(!0),this.dataservice.setUserData(this.dataservice.user_req_token),this.nav.navigateRoot(["/tabs"])):this.commonservice.presentToast("Oops","Invalid Otp"))}RegisterUser(){return(0,g.mG)(this,void 0,void 0,function*(){this.commonservice.show("Please Wait");const r=this.dataservice.set_user_signup.mobile_number.internationalNumber.replace(new RegExp(`^\\${this.dataservice.set_user_signup.mobile_number.dialCode}\\s*`),"").replace(/\s+/g,"");let a=Object.assign(Object.assign({},this.dataservice.set_user_signup),{mobile_number:r,numberDeatails:this.dataservice.set_user_signup.mobile_number});console.log("user data ==>",a);let o={user_data:a};console.log("API Data ==>",o),this.chatconnect.postData(o,"user_register").then(f=>{this.commonservice.hide(),1==f.Response.status?(this.authservice.isAuthenticated.next(!0),this.dataservice.setUserData(f.Response.user_token),this.nav.navigateRoot(["/tabs"])):this.commonservice.presentToast("Oops",f.Response.message)},f=>{this.commonservice.hide(),console.log("Connection failed Messge")})})}Resend(){return(0,g.mG)(this,void 0,void 0,function*(){this.commonservice.show("Please Wait");let a={mobile_number:this.dataservice.set_user_signup.mobile_number.internationalNumber.replace(new RegExp(`^\\${this.dataservice.set_user_signup.mobile_number.dialCode}\\s*`),"").replace(/\s+/g,""),request_type:this.requestType,app_hash:this.dataservice.appHashString};this.requestOTP(),this.chatconnect.postData(a,"sendloginotp").then(o=>{this.commonservice.hide(),1==o.Response.status?this.dataservice.setOtp(o.Response.code):this.commonservice.presentToast("Oops",o.Response.message)},o=>{this.commonservice.hide(),console.log("Connection failed Message")})})}signResend(){return(0,g.mG)(this,void 0,void 0,function*(){this.commonservice.show("Please Wait");let a={mobile_number:this.dataservice.set_user_signup.mobile_number.internationalNumber.replace(new RegExp(`^\\${this.dataservice.set_user_signup.mobile_number.dialCode}\\s*`),"").replace(/\s+/g,""),request_type:this.requestType,app_hash:this.dataservice.appHashString};this.requestOTP(),this.chatconnect.postData(a,"sendregisterotp").then(o=>{this.commonservice.hide(),1==o.Response.status?(this.dataservice.setOtp(o.Response.code),"user_signup"===o.Response.request_type&&this.dataservice.setUserData(o.Response.userdata&&o.Response.userdata.user_token)):this.commonservice.presentToast("Oops",o.Response.message)},o=>{this.commonservice.hide(),console.log("Connection failed Message")})})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(R.v),e.Y36(O.F0),e.Y36(i.SH),e.Y36(_.D),e.Y36(T.O),e.Y36(C.$),e.Y36(i.Br),e.Y36(O.gz),e.Y36(u.u))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-res-otp"]],decls:27,vars:4,consts:[["slot","start"],["text","","icon","arrow-back-outline"],["src","assets/images/logo.png"],["scroll-y","true"],[1,"container"],["src","assets/images/otp.png"],[1,"otpsec"],["form","ngForm"],["size","10"],["type","tel","name","otp","required","","maxLength","4",1,"otp",3,"ngModel","ngModelChange","input"],[4,"ngIf"],["expand","block","color","secondary","shape","round",1,"sub-btn",3,"click"],["fill","none",1,"ion-no-border","res_btn",3,"click"]],template:function(s,r){1&s&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e._UZ(4,"ion-img",2),e.qZA()(),e.TgZ(5,"ion-content",3)(6,"div",4)(7,"h3"),e._uU(8,"OTP"),e.qZA(),e._UZ(9,"ion-img",5),e.TgZ(10,"div",6)(11,"h3"),e._uU(12,"Verification Code"),e.qZA(),e.TgZ(13,"h6"),e._uU(14,"We have sent the Verification code to your mobile."),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA(),e.TgZ(17,"form",null,7)(19,"ion-grid")(20,"ion-row")(21,"ion-col",8)(22,"ion-input",9),e.NdJ("ngModelChange",function(o){return r.otp=o})("input",function(){return r.otpInputChange()}),e.qZA()()()()()()(),e.YNc(23,M,3,0,"ng-container",10),e.YNc(24,p,3,0,"ng-container",10),e.TgZ(25,"ion-button",11),e.NdJ("click",function(){return r.signup_password()}),e._uU(26,"Submit"),e.qZA()()),2&s&&(e.xp6(16),e.Oqu(r.dataservice.set_user_signup.mobile_number.internationalNumber),e.xp6(6),e.Q6J("ngModel",r.otp),e.xp6(1),e.Q6J("ngIf","user_signup"===r.requestType),e.xp6(1),e.Q6J("ngIf","user_login"===r.requestType))},dependencies:[P.O5,c._Y,c.JJ,c.JL,c.Q7,c.On,c.F,i.oU,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.Xz,i.pK,i.Nd,i.sr,i.j9,i.cs],styles:["ion-buttons[_ngcontent-%COMP%]{width:0%}.container[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:25vh}.container[_ngcontent-%COMP%]   .otpsec[_ngcontent-%COMP%]{margin:auto}.container[_ngcontent-%COMP%]   .otpsec[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]   .otpsec[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin:auto;padding:0}.container[_ngcontent-%COMP%]   .otpsec[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-bottom:1px solid #285500;height:50px;width:200px;font-size:1.5rem;text-align:center;border-radius:5px}.container[_ngcontent-%COMP%]   .otpsec[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:0 10px}.sub-btn[_ngcontent-%COMP%]{width:55%;margin:auto}.res_btn[_ngcontent-%COMP%]{color:orange!important;margin:15px 0}"]}),t})()}];let d=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[O.Bz.forChild(h),O.Bz]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[u.u],imports:[P.ez,c.u5,i.Pc,d]}),t})()}}]);