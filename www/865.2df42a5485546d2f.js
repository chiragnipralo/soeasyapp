"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[865],{865:(Z,x,i)=>{i.r(x),i.d(x,{EditprofPageModule:()=>h});var v=i(9808),a=i(2382),s=i(8058),_=i(2561),d=i(7582),e=i(4893),T=i(6501),C=i(2468),y=i(7053),b=i(6524);function l(t,m){if(1&t&&(e.ynx(0),e._UZ(1,"img",24),e.BQk()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("src",o.profile_img[0],e.LSH)}}function M(t,m){if(1&t&&(e.TgZ(0,"ion-label",25),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Oqu(null==o.dataservice.user_profile_data?null:o.dataservice.user_profile_data.user_name[0])}}function c(t,m){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"ion-icon",26),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.remove_profile())}),e.qZA(),e.BQk()}}const p=[{path:"",component:(()=>{class t{constructor(o,n,r,P,f,E,O,F){this.commonservice=o,this._router=n,this.formBuilder=r,this.dataservice=P,this.authservice=f,this.chatconnect=E,this.location=O,this.alertController=F,this.fileName="",this.isSubmitted=!1,this.profile_img=[]}doRefresh(o){this.ngOnInit(),setTimeout(()=>{o.target.complete()},2e3)}ngOnInit(){this.ionicForm=this.formBuilder.group({profile_img:[""],user_name:["",a.kI.required],user_email:["",a.kI.required],mobile:[""],user_unique_name:[""]}),this.showProfile()}onFileSelected(o){const n=o.target.files[0];n&&(this.selectedFile=n,this.fileName=n.name)}showProfile(){const o={user_token:this.dataservice.getUserData()};this.chatconnect.postData(o,"user_profile").then(n=>{console.log("this is user Data:",n),1==n.Response.status?(this.userDetails=n.Response.user_data[0],this.ionicForm.patchValue({user_name:this.userDetails.user_name,user_email:this.userDetails.email,mobile:this.userDetails.mobile,user_unique_name:this.userDetails.user_unique_name}),this.profile_img.push(this.userDetails.profile_img),console.log("THis is profile Image",this.profile_img)):this.commonservice.presentToast("",n.Response.message)}).catch(n=>{console.log("Connection failed Message",n)})}submit(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.isSubmitted=!0,this.ionicForm.markAllAsTouched(),this.ionicForm.valid){this.commonservice.show("Please Wait");const o=this.dataservice.getUserData();console.log(o);let n=new FormData;o&&n.append("user_token",o),n.append("idd",this.userDetails.id),n.append("user_name",this.ionicForm.value.user_name||""),n.append("user_unique_name",this.ionicForm.value.user_unique_name||""),n.append("user_email",this.ionicForm.value.user_email||""),this.selectedFile?n.append("profile_img",this.selectedFile,this.selectedFile.name):n.append("prev_img",this.userDetails.profile_img),this.chatconnect.postFormData(n,"update_profile").then(r=>{console.log(r),this.commonservice.hide(),1==r.Response.status?(this.commonservice.presentToast("",r.Response.message),this.location.back()):this.commonservice.presentToast("",r.Response.message)},r=>{this.commonservice.hide(),console.log("Connection failed Messge")}),console.log(this.ionicForm.value)}else(yield this.alertController.create({header:"Please Enter",subHeader:"Please Enter all details",buttons:["Dismiss"]})).present()})}remove_profile(){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Confirm",message:"Are you sure want to remove profile picture?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Yes",handler:()=>{let n={user_token:this.dataservice.getUserData()};this.chatconnect.postData(n,"user_img_delete").then(r=>{1==r.Response.status?(this.commonservice.presentToast("",r.Response.message),this.location.back()):this.commonservice.presentToast("Oops",r.Response.message)},r=>{console.log("Connection failed Messge")})}}]})).present()})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(T.v),e.Y36(_.F0),e.Y36(a.qu),e.Y36(C.D),e.Y36(y.$),e.Y36(b.O),e.Y36(v.Ye),e.Y36(s.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-editprof"]],decls:40,vars:6,consts:[[1,"top"],["slot","start"],["text","","icon","arrow-back-outline"],[1,"ion-padding"],["slot","fixed",3,"ionRefresh"],[3,"formGroup","ngSubmit"],[1,"top-container"],[1,"ion-align-items-center"],[4,"ngIf","ngIfElse"],["noImage",""],[1,"prof-icon"],["name","camera","color","success",3,"click"],["type","file","accept","image/png, image/jpg, image/jpeg",2,"display","none",3,"change"],["fileInput",""],[4,"ngIf"],["name","person-circle-outline"],["type","text","formControlName","user_name","placeholder","User Name"],["name","card-outline"],["type","text","formControlName","user_unique_name","placeholder","User ID"],["name","mail-outline"],["type","text","formControlName","user_email","placeholder","Email ID"],["name","call-outline"],["type","number","formControlName","mobile","placeholder","Contact No","readonly",""],["color","secondary","shape","round","type","submit",1,"update_btn"],["alt","Profile Image",3,"src"],[1,"avatar-label"],["name","trash","color","danger",3,"click"]],template:function(o,n){if(1&o){const r=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"div",0)(3,"ion-buttons",1),e._UZ(4,"ion-back-button",2),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6,"Edit Profile"),e.qZA()()()(),e.TgZ(7,"ion-content",3)(8,"ion-refresher",4),e.NdJ("ionRefresh",function(f){return n.doRefresh(f)}),e._UZ(9,"ion-refresher-content"),e.qZA(),e.TgZ(10,"form",5),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(11,"div",6)(12,"ion-avatar",7),e.YNc(13,l,2,1,"ng-container",8),e.YNc(14,M,2,1,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(16,"div",10)(17,"ion-icon",11),e.NdJ("click",function(){e.CHM(r);const f=e.MAs(19);return e.KtG(f.click())}),e.qZA(),e.TgZ(18,"input",12,13),e.NdJ("change",function(f){return n.onFileSelected(f)}),e.qZA(),e.YNc(20,c,2,0,"ng-container",14),e.qZA(),e.TgZ(21,"h2"),e._uU(22),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA()(),e.TgZ(25,"ion-list")(26,"ion-item"),e._UZ(27,"ion-icon",15)(28,"ion-input",16),e.qZA(),e.TgZ(29,"ion-item"),e._UZ(30,"ion-icon",17)(31,"ion-input",18),e.qZA(),e.TgZ(32,"ion-item"),e._UZ(33,"ion-icon",19)(34,"ion-input",20),e.qZA(),e.TgZ(35,"ion-item"),e._UZ(36,"ion-icon",21)(37,"ion-input",22),e.qZA()(),e.TgZ(38,"ion-button",23),e._uU(39,"Save"),e.qZA()()()}if(2&o){const r=e.MAs(15);e.xp6(10),e.Q6J("formGroup",n.ionicForm),e.xp6(3),e.Q6J("ngIf",n.profile_img[0])("ngIfElse",r),e.xp6(7),e.Q6J("ngIf",n.profile_img[0]),e.xp6(2),e.Oqu(null==n.dataservice.user_profile_data?null:n.dataservice.user_profile_data.user_name),e.xp6(2),e.Oqu(null==n.dataservice.user_profile_data?null:n.dataservice.user_profile_data.user_unique_name)}},dependencies:[v.O5,a._Y,a.JJ,a.JL,s.BJ,s.oU,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.Q$,s.q_,s.nJ,s.Wo,s.wd,s.sr,s.as,s.j9,s.cs,a.sg,a.u],styles:["ion-header[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ion-header[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;position:absolute;inset:0}.header-md[_ngcontent-%COMP%]:after{background:none}.top-container[_ngcontent-%COMP%]{text-align:center}.top-container[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin:auto;border:5px solid grey!important;position:relative;top:10px;left:0;right:0;border:2px solid black;width:100px;height:100px}.top-container[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#00f;position:absolute;bottom:0;right:0;background:grey;border:2px solid black;border-radius:3px}.avatar-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;font-size:45px;font-weight:700;text-transform:uppercase}ion-list[_ngcontent-%COMP%]{padding:10px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:5px;margin-top:5px;border-bottom:1px solid rgb(36,35,35)}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding-left:30px!important}.update_btn[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:120px;margin:auto}.prof-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{border:1px solid grey;padding:3px 10px;border-radius:20px;font-size:20px;margin:11px 30px 0}"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(p),_.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,a.u5,s.Pc,a.UX,g]}),t})()},6524:(Z,x,i)=>{i.d(x,{O:()=>b});var v=i(7582),a=i(520);const _=(0,i(7423).fo)("Network",{web:()=>i.e(4203).then(i.bind(i,4203)).then(l=>new l.NetworkWeb)});var d=i(4893),e=i(2468),T=i(6501);let C="https://api.soeasyapp.com/",b=(()=>{class l{constructor(c,u,p){this.http=c,this.dataservice=u,this.common=p,this.checkInternetConnection()}initiatePayment(c,u){const p={headers:(new a.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((g,h)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+u,JSON.stringify(c),p).subscribe(t=>{g(t)},t=>{h(t),"HttpErrorResponse"==t.name&&("Unknown Error"==t.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==t.statusText?"Something Went Wrong...":t.statusText)),console.log("In Chatconnect provider : Error",t)})})}postData(c,u){const p={headers:(new a.WM).set("Content-Type","application/json")};return new Promise((g,h)=>{this.http.post(C+u,JSON.stringify(c),p).subscribe(t=>{g(t)},t=>{h(t),"HttpErrorResponse"==t.name&&("Unknown Error"==t.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==t.statusText?"Something Went Wrong...":t.statusText)),console.log("In Chatconnect provider : Error",t)})})}checkInternetConnection(){return(0,v.mG)(this,void 0,void 0,function*(){(yield _.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(c,u){return new Promise((p,g)=>{const h=(new a.WM).set("Accept","application/json");this.http.post(C+u,c,{headers:h}).subscribe(t=>{p(t)},t=>{g(t)})})}}return l.\u0275fac=function(c){return new(c||l)(d.LFG(a.eN),d.LFG(e.D),d.LFG(T.v))},l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);