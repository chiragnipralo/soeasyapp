"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8855],{8855:(O,N,s)=>{s.r(N),s.d(N,{NotificationPageModule:()=>S});var v=s(9808),p=s(2382),c=s(8058),y=s(2561),u=s(7582),t=s(4893),x=s(6501),w=s(2468),P=s(6524),T=s(1275);const h=["searchBar"];function M(o,r){1&o&&(t.ynx(0),t.TgZ(1,"div",8)(2,"ion-label",9),t._uU(3,"No notifications"),t.qZA()(),t.BQk())}function l(o,r){if(1&o&&(t.ynx(0),t._UZ(1,"ion-img",19),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.images)}}function f(o,r){1&o&&t._UZ(0,"ion-img",20)}function g(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,d=t.oxw();return t.KtG(d.deleteNotification(n.id))}),t._UZ(1,"ion-icon",22),t._uU(2," Delete"),t.qZA()}}function m(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col",10)(3,"ion-icon",11),t.NdJ("click",function(){const d=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.view_details(d))}),t.qZA()(),t.TgZ(4,"ion-col",12)(5,"ion-avatar"),t.YNc(6,l,2,1,"ng-container",13),t.YNc(7,f,1,0,"ng-template",null,14,t.W1O),t.qZA()(),t.TgZ(9,"ion-col",15)(10,"p",16),t.NdJ("click",function(){const d=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.view_details(d))}),t._uU(11),t.qZA()(),t.TgZ(12,"ion-col",10),t._UZ(13,"ion-icon",17),t.qZA()(),t.TgZ(14,"ion-popover",18),t.YNc(15,g,3,0,"ng-template"),t.qZA(),t.BQk()}if(2&o){const e=r.$implicit,i=r.index,n=t.MAs(8);t.xp6(3),t.s9C("name",0===e.is_viewed?"ellipse":""),t.xp6(3),t.Q6J("ngIf",null!==(null==e?null:e.images))("ngIfElse",n),t.xp6(5),t.Oqu(e.notification_msg),t.xp6(2),t.MGl("id","click-trigger",i,""),t.xp6(1),t.MGl("trigger","click-trigger",i,"")}}const a=[{path:"",component:(()=>{class o{constructor(e,i,n,d,C,k,B){this.commonservice=e,this._router=i,this.modalController=n,this.dataservice=d,this.chatconnect=C,this.alertController=k,this.notificationService=B,this.notification=[],this.filterData=[],this.showSearchBar=!1,this.searchQuery=""}toggleSearchBar(){this.showSearchBar=!this.showSearchBar,this.showSearchBar?setTimeout(()=>{this.searchBarRef.nativeElement.setFocus()},100):this.searchQuery=""}ngOnInit(){this.fetchAllNotifications()}fetchAllNotifications(){return(0,u.mG)(this,void 0,void 0,function*(){try{this.notification=yield this.notificationService.fetchNotifications(),this.filterData=this.notification,this.notification.forEach(e=>(0,u.mG)(this,void 0,void 0,function*(){0===e.is_viewed&&(yield this.notificationService.updateNotificationStatus(e.id))}))}catch(e){console.error("Error fetching notifications:",e)}})}filterItems(e){this.dataservice.isNullOrUndefined(e.detail.value)||(this.filterData=this.notification.filter(i=>i.notification_msg.toLowerCase().indexOf(e.detail.value.toLowerCase())>-1))}ionViewWillEnter(){console.log("ion view will leaving now")}deleteNotification(e){let i={user_token:this.dataservice.getUserData(),type:"delete_notification",row_id:e};this.chatconnect.postData(i,"notifications").then(n=>{1==n.Response.status?this.ionViewWillEnter():this.commonservice.presentToast("Oops",n.Response.message)},n=>{console.log("Connection failed Messge")})}resetNotificationCount(){return(0,u.mG)(this,void 0,void 0,function*(){let e={user_token:this.dataservice.getUserData(),type:"reset_notification_count"};this.chatconnect.postData(e,"notifications").then(i=>{1==i.Response.status?this.dataservice.notifyCount=0:this.commonservice.presentToast("Oops",i.Response.message)},i=>{console.log("Connection failed Messge")})})}view_details(e){if(0==e.notification_status){if(0===e.is_viewed){let i={user_token:this.dataservice.getUserData(),type:"update_status",row_id:e.id};this.chatconnect.postData(i,"notifications").then(n=>{1==n.Response.status?this.ionViewWillEnter():this.commonservice.presentToast("Oops",n.Response.message)},n=>{console.log("Connection failed Messge")})}if("free_event"==e.type)this.dataservice.user_event_data.id=e.notification_id,this._router.navigate(["/detailseve"]);else if("paid_event"==e.type&&3!=e.notification_status){let i={user_token:this.dataservice.getUserData(),event_id:e.notification_id};this.chatconnect.postData(i,"view_paid_events_by_id").then(n=>{1==n.Response.status?(this.dataservice.setEventData(n.Response.events_data),this._router.navigate(["/event-details"])):this.commonservice.presentToast("Oops",n.Response.message)},n=>{console.log("Connection failed Messge")})}else if("free_community"==e.type)this.dataservice.user_community_data.id=e.notification_id,this.dataservice.user_community_data.account_type=1,this._router.navigate(["/community-details"]);else if("paid_community"==e.type)this.dataservice.user_community_data.id=e.notification_id,this.dataservice.user_community_data.type=1,this._router.navigate(["/premium-community-details"]);else if("free_draft_event"==e.type)this.dataservice.user_event_data.id=e.notification_id,this._router.navigate(["/edit-event"]);else if("paid_draft_event"==e.type)this.dataservice.user_event_data.id=e.notification_id,this._router.navigate(["/edit-paid-event"]);else if("free_community"==e.type){let i={premium:0,user_token:this.dataservice.getUserData(),type:1,community_id:e.notification_id};this.chatconnect.postData(i,"view_community_by_id").then(n=>{1==n.Response.status?(this.dataservice.setCommunityData(n.Response.community_data),this._router.navigate(["/premium-community-details"])):this.commonservice.presentToast("Oops",n.Response.message)},n=>{console.log("Connection failed Messge")})}}else this.commonservice.presentToast("Oops","This is already deleted and cannot be opened.")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.v),t.Y36(y.F0),t.Y36(c.IN),t.Y36(w.D),t.Y36(P.O),t.Y36(c.Br),t.Y36(T.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-notification"]],viewQuery:function(e,i){if(1&e&&t.Gf(h,5,t.SBq),2&e){let n;t.iGM(n=t.CRH())&&(i.searchBarRef=n.first)}},decls:12,vars:5,consts:[["slot","start"],["text","","icon","arrow-back-outline"],["slot","end","name","search-outline",1,"search_icon","ion-padding-end",3,"click"],[3,"fullscreen"],["placeholder","Search Here...",3,"ngModel","hidden","ngModelChange","ionCancel","ionChange"],["searchBar",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no_notications"],[1,"ion-text-center"],["size","1"],[1,"dot_icon",3,"name","click"],["size","2"],[4,"ngIf","ngIfElse"],["noImage",""],["size","8"],[3,"click"],["name","ellipsis-vertical",1,"more_icon",3,"id"],["triggerAction","click",3,"trigger"],[2,"height","100%","width","100%",3,"src"],["alt","img","src","https://ionicframework.com/docs/img/demos/avatar.svg",2,"height","100%","width","100%"],[2,"padding","10px",3,"click"],["name","trash"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Notifications"),t.qZA(),t.TgZ(6,"ion-icon",2),t.NdJ("click",function(){return i.toggleSearchBar()}),t.qZA()()(),t.TgZ(7,"ion-content",3)(8,"ion-searchbar",4,5),t.NdJ("ngModelChange",function(d){return i.searchQuery=d})("ionCancel",function(){return i.toggleSearchBar()})("ionChange",function(d){return i.filterItems(d)}),t.qZA(),t.YNc(10,M,4,0,"ng-container",6),t.YNc(11,m,16,6,"ng-container",7),t.qZA()),2&e&&(t.xp6(7),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngModel",i.searchQuery)("hidden",!i.showSearchBar),t.xp6(2),t.Q6J("ngIf",0==i.filterData.length),t.xp6(1),t.Q6J("ngForOf",i.filterData))},dependencies:[v.sg,v.O5,p.JJ,p.On,c.BJ,c.oU,c.Sm,c.wI,c.W2,c.Gu,c.gu,c.Xz,c.Q$,c.Nd,c.VI,c.wd,c.sr,c.d8,c.j9,c.cs],styles:["ion-title[_ngcontent-%COMP%]{position:absolute;inset:0;text-align:center}.no_notications[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}ion-row[_ngcontent-%COMP%]{border-bottom:1px solid rgb(211,209,209)}ion-row[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{height:45px;width:45px}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:nth-child(1){display:flex;align-items:center}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:nth-child(4){display:flex;align-items:center}ion-row[_ngcontent-%COMP%]   .dot_icon[_ngcontent-%COMP%]{color:#9cfbad;filter:drop-shadow(2px 2px 2px grey);font-size:9px}ion-row[_ngcontent-%COMP%]   .more_icon[_ngcontent-%COMP%]{font-size:10px}ion-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;padding-left:5px;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.Bz.forChild(a),y.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.ez,p.u5,c.Pc,Z]}),o})()},6524:(O,N,s)=>{s.d(N,{O:()=>T});var v=s(7582),p=s(520);const y=(0,s(7423).fo)("Network",{web:()=>s.e(4203).then(s.bind(s,4203)).then(h=>new h.NetworkWeb)});var u=s(4893),t=s(2468),x=s(6501);let w="https://api.soeasyapp.com/",T=(()=>{class h{constructor(l,f,g){this.http=l,this.dataservice=f,this.common=g,this.checkInternetConnection()}initiatePayment(l,f){const g={headers:(new p.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((m,_)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+f,JSON.stringify(l),g).subscribe(a=>{m(a)},a=>{_(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}postData(l,f){const g={headers:(new p.WM).set("Content-Type","application/json")};return new Promise((m,_)=>{this.http.post(w+f,JSON.stringify(l),g).subscribe(a=>{m(a)},a=>{_(a),"HttpErrorResponse"==a.name&&("Unknown Error"==a.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==a.statusText?"Something Went Wrong...":a.statusText)),console.log("In Chatconnect provider : Error",a)})})}checkInternetConnection(){return(0,v.mG)(this,void 0,void 0,function*(){(yield y.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(l,f){return new Promise((g,m)=>{const _=(new p.WM).set("Accept","application/json");this.http.post(w+f,l,{headers:_}).subscribe(a=>{g(a)},a=>{m(a)})})}}return h.\u0275fac=function(l){return new(l||h)(u.LFG(p.eN),u.LFG(t.D),u.LFG(x.v))},h.\u0275prov=u.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);