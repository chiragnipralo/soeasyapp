"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9603],{9603:(U,T,n)=>{n.r(T),n.d(T,{EditCommunityPageModule:()=>D});var t=n(9808),o=n(2382),c=n(8058),_=n(2561),f=n(7582),M=n(1091),I=n(6866),e=n(4893),P=n(2313),C=n(6501),p=n(2468),b=n(6524);function a(i,v){1&i&&e._UZ(0,"img",22),2&i&&e.Q6J("src",v.$implicit,e.LSH)}function l(i,v){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s.message," ")}}function u(i,v){if(1&i&&(e.ynx(0),e.YNc(1,l,2,1,"div",23),e.BQk()),2&i){const s=v.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ionicForm.get("title").hasError(s.type)&&(r.ionicForm.get("title").dirty||r.ionicForm.get("title").touched))}}function x(i,v){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-select-option",25),e._uU(2),e.qZA(),e.BQk()),2&i){const s=v.$implicit;e.xp6(1),e.Q6J("value",s.id),e.xp6(1),e.Oqu(s.name)}}function E(i,v){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s.message," ")}}function h(i,v){if(1&i&&(e.ynx(0),e.YNc(1,E,2,1,"div",23),e.BQk()),2&i){const s=v.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ionicForm.get("category").hasError(s.type)&&(r.ionicForm.get("category").dirty||r.ionicForm.get("category").touched))}}const A=[{path:"",component:(()=>{class i{constructor(s,r,m,d,g,y,O,Z,S,Y,R,k){this.commonservice=r,this.formBuilder=m,this.common=d,this.dataservice=g,this.navCtrl=y,this.chatconnect=O,this.modalController=Z,this.successmodal=S,this.router=Y,this.location=R,this.alertController=k,this.isSubmitted=!1,this.file_uploaddata="",this.Blobimage=[],this.showMoreBar=!1,this.isSelectDisabled=!1,this.error_messages={title:[{type:"required",message:"Title is required."}],description:[{type:"required",message:"Description is required."}],category:[{type:"required",message:"Category is required."}]},this.sanitizer=s,this.imageUrls=[]}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){this.commonservice.show(),this.ionicForm=this.formBuilder.group({title:["",[o.kI.required]],description:[""],category:[""],community_type:[""]}),yield this.GetDashboard(),this.All_community()})}GetDashboard(){return new Promise((s,r)=>{let m={user_token:this.dataservice.getUserData()};this.chatconnect.postData(m,"user_dashboard").then(d=>{console.log(d),1==d.Response.status?(this.dataservice.events_categories=d.Response.all_categories,s(!0)):this.common.presentToast("Oops",d.Response.message)},d=>{console.log("Connection failed Messge"),r(d)})})}submit(){var s,r,m,d;return(0,f.mG)(this,void 0,void 0,function*(){if(this.isSubmitted=!0,this.ionicForm.markAllAsTouched(),this.ionicForm.valid){const y=this.dataservice.getUserData();var g=new FormData;g.append("premium","0"),g.append("community_id",this.dataservice.user_community_data.id),null!==y&&g.append("user_token",y),g.append("title",null===(s=this.ionicForm.get("title"))||void 0===s?void 0:s.value),g.append("description",null===(r=this.ionicForm.get("description"))||void 0===r?void 0:r.value),g.append("category",null===(m=this.ionicForm.get("category"))||void 0===m?void 0:m.value),g.append("community_type",null===(d=this.ionicForm.get("community_type"))||void 0===d?void 0:d.value),g.append("previous_image",this.dataservice.previous_img);const O=localStorage.getItem("event_images");null!==O&&!this.dataservice.isNullOrUndefined(O)&&g.append("community_images",this.dataservice.convertBase64ToBlob(O)),console.log(g),this.chatconnect.postFormData(g,"edit_community").then(Z=>{this.common.hide(),1==Z.Response.status?(this.common.presentToast("",Z.Response.message),localStorage.removeItem("event_images"),this.location.back()):this.common.presentToast("Oops",Z.Response.message)},Z=>{this.common.hide(),console.log("Connection failed Messge")})}else(yield this.alertController.create({header:"",subHeader:"Please enter required fields",buttons:["Dismiss"]})).present()})}ionViewWillLeave(){console.log("leave!"),this.All_community()}All_community(){console.log("This is community Id",this.dataservice.user_community_data);let s={user_token:this.dataservice.getUserData(),community_id:this.dataservice.user_community_data.id,type:this.dataservice.user_community_data.account_type,premium:0};this.chatconnect.postData(s,"view_community_by_id").then(r=>{if(this.commonservice.hide(),1==r.Response.status){const m=r.Response.community_data;this.ionicForm.patchValue({title:m.community_title,description:m.community_description});const d=this.dataservice.events_categories.find(O=>O.name===m.community_category);console.log(d),this.ionicForm.patchValue({category:d?d.id:null});const g=m.community_type;console.log(g);const y=void 0!==g?g.toString():null;this.ionicForm.patchValue({community_type:y}),this.imageUrls.push(m.community_image),this.premiumImage=m.community_image,this.dataservice.previous_img=m.community_image,console.log(this.imageUrls)}else this.common.presentToast("Oops",r.Response.message)},r=>{console.log("Connection failed Message")})}view(s,r){return(0,f.mG)(this,void 0,void 0,function*(){const m=yield this.modalController.create({component:M.b,cssClass:"my-menubar"});return m.onDidDismiss().then(d=>{null!=d.data?d.data.cropped_image&&(this.dataservice.convertBase64ToBlob(d.data.cropped_image),"event"==r&&(this.imageUrls=[],this.imageUrls.unshift(d.data.cropped_image),localStorage.setItem("event_images",d.data.cropped_image))):null!==this.premiumImage?(this.imageUrls=[],this.imageUrls.push(this.premiumImage)):this.imageUrls=[]}),yield m.present()})}loadImageFromDevice(s,r){console.log(s);const m=s.target.files[0];console.log(m),this.file_uploaddata=m,console.log(m),(new FormData).append("photo",m,m.name),this.Blobimage.push(m),this.dataservice.blobToBase64(m).then(y=>{this.dataservice.event_base64img=y,this.view(y,r)});const g=new FileReader;g.readAsArrayBuffer(m),g.onload=()=>{let y=new Blob([new Uint8Array(g.result)]),O=URL.createObjectURL(y);"event"==r&&this.imageUrls.unshift(this.sanitizer.bypassSecurityTrustUrl(O))},console.log(this.Blobimage),g.onerror=y=>{}}OpenSuccess(s){return(0,f.mG)(this,void 0,void 0,function*(){this.dataservice.shareable_event_url=s;const r=yield this.modalController.create({component:I.I,cssClass:"pindialog-container",handle:!0});return r.onDidDismiss().then(m=>{console.log("DATA HERE ---\x3e",m),null!=m.data&&this.dataservice.shareable_event_url&&(this.closeModal(),this.navCtrl.navigateRoot("/tabs/dashboard"))}),yield r.present()})}closeModal(){return(0,f.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss({dismissed:!0})})}}return i.\u0275fac=function(s){return new(s||i)(e.Y36(P.H7),e.Y36(C.v),e.Y36(o.qu),e.Y36(C.v),e.Y36(p.D),e.Y36(c.SH),e.Y36(b.O),e.Y36(c.IN),e.Y36(c.IN),e.Y36(_.F0),e.Y36(t.Ye),e.Y36(c.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-community"]],decls:43,vars:5,consts:[["slot","start"],["text","","icon","arrow-back-outline"],["slot","end","name","close","routerLink","/tabs/dashboard"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[2,"margin-top","10px"],[1,"container"],[1,"images"],["ngFor","",3,"ngForOf"],["name","add-circle","slot","end",2,"font-size","45px","color","seagreen","position","absolute","right","0",3,"click"],["type","file","id","file-input","accept","image/png, image/jpg, image/jpeg",2,"display","none",3,"change"],["fileInput",""],[1,"form-input"],["formControlName","title","placeholder","Enter Community Title"],[4,"ngFor","ngForOf"],["formControlName","description","placeholder","Write Description About Community"],["formControlName","category","interface","alert","placeholder","Select Category"],["formControlName","community_type","placeholder","Select Community Type","disabled",""],["value","0"],["value","1"],[1,"btn"],["expand","block","type","submit","color","secondary","shape","round"],[1,"image",2,"border-radius","10px",3,"src"],["class","error-message",4,"ngIf"],[1,"error-message"],[3,"value"]],template:function(s,r){if(1&s){const m=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Edit Community"),e.qZA(),e._UZ(6,"ion-icon",2),e.qZA()(),e.TgZ(7,"ion-content",3)(8,"form",4),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(9,"ion-list")(10,"div",5)(11,"div",6)(12,"p",7),e.YNc(13,a,1,1,"ng-template",8),e.TgZ(14,"ion-icon",9),e.NdJ("click",function(){e.CHM(m);const g=e.MAs(16);return e.KtG(g.click())}),e.qZA(),e.TgZ(15,"input",10,11),e.NdJ("change",function(g){return r.loadImageFromDevice(g,"event")}),e.qZA()(),e.TgZ(17,"div",12)(18,"h4"),e._uU(19,"Title"),e.qZA(),e._UZ(20,"ion-input",13),e.qZA(),e.YNc(21,u,2,1,"ng-container",14),e.TgZ(22,"div",12)(23,"h4"),e._uU(24,"Description"),e.qZA(),e._UZ(25,"ion-textarea",15),e.qZA(),e.TgZ(26,"div",12)(27,"h4"),e._uU(28,"Category"),e.qZA(),e.TgZ(29,"ion-select",16),e.YNc(30,x,3,2,"ng-container",14),e.qZA()(),e.YNc(31,h,2,1,"ng-container",14),e.TgZ(32,"div",12)(33,"h4"),e._uU(34,"Community Type"),e.qZA(),e.TgZ(35,"ion-select",17)(36,"ion-select-option",18),e._uU(37,"Public"),e.qZA(),e.TgZ(38,"ion-select-option",19),e._uU(39,"Private"),e.qZA()()()()()(),e.TgZ(40,"div",20)(41,"ion-button",21),e._uU(42,"Update"),e.qZA()()()()}2&s&&(e.xp6(8),e.Q6J("formGroup",r.ionicForm),e.xp6(5),e.Q6J("ngForOf",r.imageUrls),e.xp6(8),e.Q6J("ngForOf",r.error_messages.title),e.xp6(9),e.Q6J("ngForOf",r.dataservice.events_categories),e.xp6(1),e.Q6J("ngForOf",r.error_messages.category))},dependencies:[t.sg,t.O5,o._Y,o.JJ,o.JL,o.sg,o.u,c.oU,c.YG,c.Sm,c.W2,c.Gu,c.gu,c.pK,c.q_,c.t9,c.n0,c.g2,c.wd,c.sr,c.QI,c.j9,c.cs,c.YI,_.rH],styles:[".error-message[_ngcontent-%COMP%]{color:red;text-align:center;padding-bottom:10px}ion-toolbar[_ngcontent-%COMP%]{--border-style: none}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.3rem;padding:10px}.custom-file-input[_ngcontent-%COMP%]{text-indent:-9999px;z-index:1;height:99%;max-width:99%;margin:auto;border:none;background:url(/assets/images/download.png);background-size:35px 35px;background-repeat:no-repeat;background-position:center}.container[_ngcontent-%COMP%]{margin:0 auto 50px;max-width:800px}ion-row[_ngcontent-%COMP%]{height:25vh;border-radius:10px;margin-bottom:10px;background:rgb(241,241,241);border:1px solid #285500}ion-row[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{position:absolute;font-size:14px;left:0;z-index:1;right:0;top:43px;color:#000}.form-input[_ngcontent-%COMP%]{margin-bottom:5px}h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700}ion-label[_ngcontent-%COMP%]{font-size:16px;font-weight:bolder!important}ion-input[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;height:40px;padding:5px!important;background:rgb(241,241,241);border:1px solid #285500}ion-textarea[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;padding:5px!important;background:rgb(241,241,241);border:1px solid #285500}ion-select[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;border-radius:5px;padding-left:14px!important;height:40px;background:rgb(241,241,241);border:1px solid #285500}.btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:auto;max-width:200px}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(A),_.Bz]}),i})(),D=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[t.ez,o.u5,o.UX,c.Pc,F]}),i})()},1091:(U,T,n)=>{n.d(T,{b:()=>C});var t=n(4893),o=n(6501),c=n(2468),_=n(8058),f=n(9808),M=n(3877);const I=["cropper"];function e(p,b){if(1&p){const a=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(a);const u=t.oxw();return t.KtG(u.close())}),t._UZ(1,"ion-icon",8),t.qZA()}}function P(p,b){if(1&p){const a=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(a);const u=t.oxw();return t.KtG(u.cropImage())}),t._UZ(1,"ion-icon",9),t.qZA()}}let C=(()=>{class p{constructor(a,l,u){this.commonservice=a,this.dataservice=l,this.modalController=u,this.myImage=null,this.imageChangedEvent="",this.croppedImage="",this.scale=1,this.transform={}}ngOnInit(){}imageLoaded(){}imageCropped(a){this.croppedImage=a.base64}loadImageFailed(){console.log("Image load failed!")}fileChangeEvent(a){this.imageChangedEvent=a}cropImage(){this.cropper&&this.cropper.crop()&&this.cropper.crop().base64&&(this.croppedImage=this.cropper.crop().base64),this.myImage=null,this.modalController.dismiss({dismissed:!0,cropped_image:this.croppedImage})}close(){this.myImage=null,this.croppedImage=null,this.modalController.dismiss()}discardChanges(){this.myImage=null,this.croppedImage=null}rotate(){var a;const l=((null!==(a=this.transform.rotate)&&void 0!==a?a:0)+90)%360;this.transform=Object.assign(Object.assign({},this.transform),{rotate:l})}zoomOut(){this.scale=Math.max(.1,this.scale-.1),this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}zoomIn(){this.scale=Math.min(3,this.scale+.1),this.transform=Object.assign(Object.assign({},this.transform),{scale:this.scale})}}return p.\u0275fac=function(a){return new(a||p)(t.Y36(o.v),t.Y36(c.D),t.Y36(_.IN))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-imgcropper"]],viewQuery:function(a,l){if(1&a&&t.Gf(I,5),2&a){let u;t.iGM(u=t.CRH())&&(l.cropper=u.first)}},decls:16,vars:10,consts:[["slot","start"],["color","success",3,"click",4,"ngIf"],["slot","end"],["format","jpeg",3,"imageBase64","imageChangedEvent","maintainAspectRatio","aspectRatio","cropperMaxWidth","cropperMaxHeight","transform","autoCrop","imageCropped","loadImageFailed","imageLoaded"],["cropper",""],[2,"display","flex","justify-content","space-around"],[3,"click"],["color","success",3,"click"],["color","danger","slot","icon-only","name","close"],["color","success","slot","icon-only","name","checkmark"]],template:function(a,l){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Crop "),t.qZA(),t.TgZ(4,"ion-buttons",0),t.YNc(5,e,2,0,"ion-button",1),t.qZA(),t.TgZ(6,"ion-buttons",2),t.YNc(7,P,2,0,"ion-button",1),t.qZA()()(),t.TgZ(8,"ion-content")(9,"image-cropper",3,4),t.NdJ("imageCropped",function(x){return l.imageCropped(x)})("loadImageFailed",function(){return l.loadImageFailed()})("imageLoaded",function(){return l.imageLoaded()}),t.qZA(),t.TgZ(11,"div",5)(12,"ion-button",6),t.NdJ("click",function(){return l.zoomOut()}),t._uU(13,"Zoom -"),t.qZA(),t.TgZ(14,"ion-button",6),t.NdJ("click",function(){return l.zoomIn()}),t._uU(15,"Zoom +"),t.qZA()()()),2&a&&(t.xp6(5),t.Q6J("ngIf",l.dataservice.event_base64img),t.xp6(2),t.Q6J("ngIf",l.dataservice.event_base64img),t.xp6(2),t.Q6J("imageBase64",l.dataservice.event_base64img)("imageChangedEvent",l.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",16/9)("cropperMaxWidth",3e3)("cropperMaxHeight",3e3)("transform",l.transform)("autoCrop",!1))},dependencies:[f.O5,M.ap,_.YG,_.Sm,_.W2,_.Gu,_.gu,_.wd,_.sr]}),p})()},6866:(U,T,n)=>{n.d(T,{I:()=>I});var t=n(7582),o=n(4893),c=n(8058),_=n(2468),f=n(9808);function M(e,P){1&e&&(o.ynx(0),o.TgZ(1,"P"),o._uU(2,"Your public event has been sent for approval. You will be notified once it's approved."),o.qZA(),o.BQk())}let I=(()=>{class e{constructor(C,p){this.modalController=C,this.dataservice=p}ngOnInit(){}closeModal(){return(0,t.mG)(this,void 0,void 0,function*(){yield this.modalController.dismiss({dismissed:!0})})}}return e.\u0275fac=function(C){return new(C||e)(o.Y36(c.IN),o.Y36(_.D))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-success"]],decls:13,vars:1,consts:[["slot","start"],[3,"click"],["slot","end","name","close"],[1,"ion-padding"],[1,"contianer"],["src","assets/images/congratulation.png"],[1,"text"],[1,"head-text"],[4,"ngIf"],[1,"foot"],["expand","block","color","secondary","shape","round",3,"click"]],template:function(C,p){1&C&&(o.TgZ(0,"ion-buttons",0)(1,"ion-button",1),o.NdJ("click",function(){return p.closeModal()}),o._UZ(2,"ion-icon",2),o.qZA()(),o.TgZ(3,"ion-content",3)(4,"div",4),o._UZ(5,"ion-img",5),o.TgZ(6,"div",6)(7,"p",7),o._uU(8,"Event creation complete!"),o.qZA(),o.YNc(9,M,3,0,"ng-container",8),o.qZA(),o.TgZ(10,"div",9)(11,"ion-button",10),o.NdJ("click",function(){return p.closeModal()}),o._uU(12,"Close"),o.qZA()()()()),2&C&&(o.xp6(9),o.Q6J("ngIf",0==p.dataservice.public_event))},dependencies:[f.O5,c.YG,c.Sm,c.W2,c.gu,c.Xz],styles:["ion-icon[_ngcontent-%COMP%]{font-size:1.4rem}.contianer[_ngcontent-%COMP%]{position:relative;top:10%}.contianer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:40vh;border-radius:20px;margin:auto}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{text-align:center}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .head-text[_ngcontent-%COMP%]{font-size:1.2rem;word-spacing:2px;font-weight:600}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:bolder}.contianer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;font-weight:500}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]{margin-top:40px;text-align:center}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{background:var(--ion-color-dark);padding:7px;margin-left:10px;border-radius:50%}.contianer[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{max-width:250px;margin:40px auto auto;height:40px}"]}),e})()},6524:(U,T,n)=>{n.d(T,{O:()=>C});var t=n(7582),o=n(520);const _=(0,n(7423).fo)("Network",{web:()=>n.e(4203).then(n.bind(n,4203)).then(p=>new p.NetworkWeb)});var f=n(4893),M=n(2468),I=n(6501);let e="https://api.soeasyapp.com/",C=(()=>{class p{constructor(a,l,u){this.http=a,this.dataservice=l,this.common=u,this.checkInternetConnection()}initiatePayment(a,l){const u={headers:(new o.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((x,E)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+l,JSON.stringify(a),u).subscribe(h=>{x(h)},h=>{E(h),"HttpErrorResponse"==h.name&&("Unknown Error"==h.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==h.statusText?"Something Went Wrong...":h.statusText)),console.log("In Chatconnect provider : Error",h)})})}postData(a,l){const u={headers:(new o.WM).set("Content-Type","application/json")};return new Promise((x,E)=>{this.http.post(e+l,JSON.stringify(a),u).subscribe(h=>{x(h)},h=>{E(h),"HttpErrorResponse"==h.name&&("Unknown Error"==h.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==h.statusText?"Something Went Wrong...":h.statusText)),console.log("In Chatconnect provider : Error",h)})})}checkInternetConnection(){return(0,t.mG)(this,void 0,void 0,function*(){(yield _.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(a,l){return new Promise((u,x)=>{const E=(new o.WM).set("Accept","application/json");this.http.post(e+l,a,{headers:E}).subscribe(h=>{u(h)},h=>{x(h)})})}}return p.\u0275fac=function(a){return new(a||p)(f.LFG(o.eN),f.LFG(M.D),f.LFG(I.v))},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);