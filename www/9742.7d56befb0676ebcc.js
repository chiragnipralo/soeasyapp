"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9742],{6524:(B,P,a)=>{a.d(P,{O:()=>w});var f=a(7582),m=a(520);const v=(0,a(7423).fo)("Network",{web:()=>a.e(4203).then(a.bind(a,4203)).then(g=>new g.NetworkWeb)});var _=a(4893),t=a(2468),M=a(6501);let x="https://api.soeasyapp.com/",w=(()=>{class g{constructor(h,d,p){this.http=h,this.dataservice=d,this.common=p,this.checkInternetConnection()}initiatePayment(h,d){const p={headers:(new m.WM).set("Content-Type","application/json").set("Authorization","PAY46ZGYME1AE6LUR1AVI1701862757.YFGJ11SECKEY")};return new Promise((C,u)=>{this.http.post("https://admin.payomatix.com/payment/merchant/"+d,JSON.stringify(h),p).subscribe(i=>{C(i)},i=>{u(i),"HttpErrorResponse"==i.name&&("Unknown Error"==i.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==i.statusText?"Something Went Wrong...":i.statusText)),console.log("In Chatconnect provider : Error",i)})})}postData(h,d){const p={headers:(new m.WM).set("Content-Type","application/json")};return new Promise((C,u)=>{this.http.post(x+d,JSON.stringify(h),p).subscribe(i=>{C(i)},i=>{u(i),"HttpErrorResponse"==i.name&&("Unknown Error"==i.statusText?this.checkInternetConnection():this.common.presentToast("","OK"==i.statusText?"Something Went Wrong...":i.statusText)),console.log("In Chatconnect provider : Error",i)})})}checkInternetConnection(){return(0,f.mG)(this,void 0,void 0,function*(){(yield v.getStatus()).connected?console.log("Internet is connected"):(console.log("No internet connection"),this.common.presentToast("","Check your internet connection"))})}postFormData(h,d){return new Promise((p,C)=>{const u=(new m.WM).set("Accept","application/json");this.http.post(x+d,h,{headers:u}).subscribe(i=>{p(i)},i=>{C(i)})})}}return g.\u0275fac=function(h){return new(h||g)(_.LFG(m.eN),_.LFG(t.D),_.LFG(M.v))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9742:(B,P,a)=>{a.r(P),a.d(P,{ChatPageModule:()=>Z});var f=a(9808),m=a(2382),s=a(8058),v=a(2561),_=a(7582),t=a(4893),M=a(2943),x=a(6501),T=a(2468),w=a(6524);const g=["searchBar"];function O(n,l){1&n&&(t.ynx(0),t.TgZ(1,"ion-card",8),t._uU(2," You don't have any chats yet. "),t.qZA(),t.BQk())}function h(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-img",13),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.openModal(c.original_event_images||c.event_images))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.event_images)}}function d(n,l){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,y=t.oxw(2);return t.KtG(y.navigatetoChat(r))}),t.TgZ(2,"ion-avatar",11),t.YNc(3,h,2,1,"ng-container",7),t._UZ(4,"ion-icon",12),t.qZA(),t.TgZ(5,"div")(6,"ion-label"),t._uU(7),t.ALo(8,"titlecase"),t.qZA(),t.TgZ(9,"h6"),t._uU(10),t.qZA()()(),t.BQk()}if(2&n){const e=l.$implicit;t.xp6(3),t.Q6J("ngIf",null!==e.event_images),t.xp6(1),t.Q6J("name",2===e.chat_type?"people":"calendar"),t.xp6(3),t.Oqu(t.lcZ(8,4,e.event_name)),t.xp6(3),t.Oqu(e.event_date)}}function p(n,l){if(1&n&&(t.ynx(0),t.YNc(1,d,11,6,"ng-container",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filterData)}}const u=[{path:"",component:(()=>{class n{constructor(e,o,c,r,y){this.commonservice=e,this.dataservice=o,this.chatconnect=c,this.modalController=r,this._router=y,this.community_chats=[],this.showSearchBar=!1,this.searchQuery="",this.chat_events=[],this.filterData=[],this.segment="chat"}toggleSearchBar(){this.showSearchBar=!this.showSearchBar,this.showSearchBar?setTimeout(()=>{this.searchBarRef.nativeElement.setFocus()},100):this.searchQuery=""}doRefresh(e){this.ionViewDidEnter(),setTimeout(()=>{e.target.complete()},2e3)}filterItems(e){this.dataservice.isNullOrUndefined(e.detail.value)||(this.filterData=this.chat_events.filter(o=>o.event_name.toLowerCase().indexOf(e.detail.value.toLowerCase())>-1))}ngOnInit(){console.log("ENter 11")}listChats(){let e={user_token:this.dataservice.getUserData()};this.chatconnect.postData(e,"get_all_event_chats").then(o=>{this.chat_events=[],Array.isArray(o.Response.event_chats)&&(this.chat_events=this.chat_events.concat(o.Response.event_chats)),Array.isArray(o.Response.community_chats)&&(this.chat_events=this.chat_events.concat(o.Response.community_chats)),Array.isArray(o.Response.paid_community_chats)&&(this.chat_events=this.chat_events.concat(o.Response.paid_community_chats)),this.filterData=this.chat_events.sort((c,r)=>{const y=new Date(c.latest_chat_date);return new Date(r.latest_chat_date).getTime()-y.getTime()}),console.log("Final Result ==>",this.filterData)},o=>{console.log("Connection failed Messge")})}navigatetoChat(e){this.dataservice.user_event_chat_data=e,this._router.navigate(["chat-detail"])}chat_connect(){this._router.navigate(["pages/chat-contact"])}ionViewDidEnter(){console.log("ENter"),this.listChats()}openModal(e){return(0,_.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:M.B,componentProps:{originalEventImages:e}})).present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.v),t.Y36(T.D),t.Y36(w.O),t.Y36(s.IN),t.Y36(v.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(e,o){if(1&e&&t.Gf(g,5,t.SBq),2&e){let c;t.iGM(c=t.CRH())&&(o.searchBarRef=c.first)}},decls:14,vars:5,consts:[[3,"translucent"],["routerLink","tabs/dashboard","name","arrow-back-outline"],["name","search-outline",1,"search_icon",3,"click"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down","pullingText","Pull to refresh","refreshingSpinner","circles"],["placeholder","Search....",3,"ngModel","hidden","ngModelChange","ionCancel","ionChange"],["searchBar",""],[4,"ngIf"],["mode","ios",1,"ion-text-center","ion-padding"],[4,"ngFor","ngForOf"],["lines","full",1,"header",3,"click"],[2,"height","41px","width","46px"],[1,"icon_icon",3,"name"],[3,"src","click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"div"),t._UZ(3,"ion-icon",1),t.TgZ(4,"ion-title"),t._uU(5,"Messages"),t.qZA(),t.TgZ(6,"ion-icon",2),t.NdJ("click",function(){return o.toggleSearchBar()}),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-refresher",3),t.NdJ("ionRefresh",function(r){return o.doRefresh(r)}),t._UZ(9,"ion-refresher-content",4),t.qZA(),t.TgZ(10,"ion-searchbar",5,6),t.NdJ("ngModelChange",function(r){return o.searchQuery=r})("ionCancel",function(){return o.toggleSearchBar()})("ionChange",function(r){return o.filterItems(r)}),t.qZA(),t.YNc(12,O,3,0,"ng-container",7),t.YNc(13,p,2,1,"ng-container",7),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(10),t.Q6J("ngModel",o.searchQuery)("hidden",!o.showSearchBar),t.xp6(2),t.Q6J("ngIf",o.chat_events&&0==o.chat_events.length),t.xp6(1),t.Q6J("ngIf",o.chat_events&&o.chat_events.length>0))},dependencies:[f.sg,f.O5,m.JJ,m.On,s.BJ,s.PM,s.W2,s.Gu,s.gu,s.Xz,s.Ie,s.Q$,s.nJ,s.Wo,s.VI,s.wd,s.sr,s.j9,s.YI,v.rH,f.rS],styles:["ion-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 10px;display:flex;align-items:center;justify-content:space-between}ion-toolbar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #ffffff, #e2fbcc)}ion-item[_ngcontent-%COMP%]{--background: transparent}.icon_icon[_ngcontent-%COMP%]{position:absolute;border-radius:50%;bottom:10px;left:23px;font-size:15px;background:#e2fee4;padding:4px}ion-searchbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}ion-item[_ngcontent-%COMP%]{border-bottom:1px solid rgb(171,169,169);margin:0 10px}ion-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:10px;font-weight:700;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:55vw}ion-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:gray;font-size:12px}ion-button[_ngcontent-%COMP%]{float:right;right:15px;bottom:75px;z-index:10;position:sticky;--border-radius: 50%;height:50px;--ripple-color: #003714}"]}),n})()}];let i=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(u),v.Bz]}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez,m.u5,s.Pc,i]}),n})()}}]);